<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/">
    <title>云泽の小屋</title>
    <link href="https://zeyun.dpdns.org/feed.xml" rel="self" />
    <link href="https://zeyun.dpdns.org" />
    <updated>2026-01-24T00:22:43+08:00</updated>
    <author>
        <name>云泽</name>
    </author>
    <id>https://zeyun.dpdns.org</id>

    <entry>
        <title>网络设备配置实战分析 Part 6</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/network_with_huawei_ensp_part6.html"/>
        <id>https://zeyun.dpdns.org/network_with_huawei_ensp_part6.html</id>
            <category term="网络设备配置技术学习笔记"/>

        <updated>2026-01-23T16:35:05+08:00</updated>
            <summary>
                <![CDATA[
                    网络实战分析综合练习 结合之前的练习，我总结了以下的拓扑图来练习 拓扑图下载：点我下载 防火墙镜像下载：点我下载 实操步骤：需要在每一台终端设备中操作（PC，Cilent，Server除外）&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h2 class="align-center">网络实战分析综合练习</h2>
<p>结合之前的练习，我总结了以下的拓扑图来练习</p>
<p>拓扑图下载：点我下载</p>
<p>防火墙镜像下载：<a href="https://www.ilanzou.com/s/KdUn3eSj" target="_blank" rel="noopener noreferrer">点我下载</a></p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-24-000929.png" alt="" width="2233" height="1348" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-24-000929-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-24-000929-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-24-000929-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-24-000929-xl.webp 1024w"></figure>
<h5><strong>习题一：按照拓扑要求对所有网络设备进行重新的命名，为了方便查看和配置关闭所有设备的信息中心功能，停止记录设备的日志和Debug信息</strong></h5>
<p>实操步骤：需要在每一台终端设备中操作（PC，Cilent，Server除外）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-170736.png" alt="" width="1312" height="401" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-170736-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-170736-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-170736-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-170736-xl.webp 1024w"></figure>
<p>代码部分如下：</p>
<pre class="language-cpp line-numbers"><code>&lt;Huawei&gt;system-view 
//切换系统视图
[Huawei]sysname + 设备名称
//改名
[Huawei]undo info-center enable
//关闭Debug信息 </code></pre>
<p>提示部分：没啥难度，就是设备多，不要遗漏</p>
<h5><strong>习题二：按照网络配置的要求为各个区域的网络设备和计算机，配置合理的IP地址和网关使其能够内网的通讯，并且按照网络拓扑的要求在交换机上划分对应的VLAN，并且将其对应的物理端口划入到对应的VLAN中</strong></h5>
<p>实操步骤如下：</p>
<p>（1）根据提示的拓扑，完成vlan的划分（这里是vlan10，20，30，40）需要在L3-SW上操作（两台设备都要操作），先进入L3-SW1上创建vlan</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-171629.png" alt="" width="1287" height="352" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-171629-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-171629-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-171629-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-171629-xl.webp 1024w"></figure>
<p>在L3-SW1的代码部分如下（<code>*注意</code>：在L3-SW2配置vlanif的ip时，不能使用和L3-SW1一模一样的ip，必须同网段，不能同ip）：</p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]vlan batch 10 20 30 40
//使用vlan batch同时创建多个vlan
[L3-SW1]int vlan 10
//进入vlanif10，注意是”vlanif“而不是”vlan10“
[L3-SW1-Vlanif10]ip add 192.168.3.1 24
//添加ip地址（此地址将作为下层对应vlan下PC的网关ip）

//剩余的vlan20，30，40也是同理（我这里就不过多解释）
[L3-SW1-Vlanif10]int vlan 20
[L3-SW1-Vlanif20]ip add 192.168.53.1 24
[L3-SW1-Vlanif20]int vlan 30
[L3-SW1-Vlanif30]ip add 192.168.63.1 24
[L3-SW1-Vlanif30]int vlan 40
[L3-SW1-Vlanif40]ip add 192.168.73.1 24</code></pre>
<p>在L3-SW2的配置如下（注意ip地址的变动）：</p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]vlan batch 10 20 30 40
//使用vlan batch同时创建多个vlan
[L3-SW1]int vlan 10
[L3-SW1-Vlanif10]ip add 192.168.3.2 24
//添加ip地址（此地址将作为下层对应vlan下PC的网关ip）

//剩余的vlan20，30，40也是同理，注意ip变成.2了
[L3-SW1-Vlanif10]int vlan 20
[L3-SW1-Vlanif20]ip add 192.168.53.2 24
[L3-SW1-Vlanif20]int vlan 30
[L3-SW1-Vlanif30]ip add 192.168.63.2 24
[L3-SW1-Vlanif30]int vlan 40
[L3-SW1-Vlanif40]ip add 192.168.73.2 24</code></pre>
<p>提示部分：配置vlan ip的时候，不要进入到错误的vlan下，此外注意自己的网关和这个要对应</p>
<p>（2）在各层交换机上配置端口模式，放行所有vlan</p>
<p>（2-1）在L3-SW1和L3-SW2上配置所有的下层接口为Trunk模式，并且配置为放行所有vlan（这里以L3-SW1示例）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-173525.png" alt="" width="1244" height="427" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-173525-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-173525-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-173525-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-173525-xl.webp 1024w"></figure>
<p>L3-SW1的代码部分如下（<code>*注意</code>：L3-SW2也要进行相同配置）：</p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]int g0/0/1
//进入g0/0/1口
[L3-SW1-GigabitEthernet0/0/1]port link-type trunk
//配置端口类型为Trunk模式
[L3-SW1-GigabitEthernet0/0/1]port trunk allow-pass vlan all
//放行所有vlan
//剩下的g0/0/2，3，4都是同理
[L3-SW1-GigabitEthernet0/0/1]int g0/0/2
[L3-SW1-GigabitEthernet0/0/2]port link-type trunk
[L3-SW1-GigabitEthernet0/0/2]port trunk allow-pass vlan all
[L3-SW1-GigabitEthernet0/0/2]int g0/0/3
[L3-SW1-GigabitEthernet0/0/3]port link-type trunk
[L3-SW1-GigabitEthernet0/0/3]port trunk allow-pass vlan all
[L3-SW1-GigabitEthernet0/0/3]int g0/0/4
[L3-SW1-GigabitEthernet0/0/4]port link-type trunk
[L3-SW1-GigabitEthernet0/0/4]port trunk allow-pass vlan all</code></pre>
<p>提示部分：L3-SW1和SW2都需要放行vlan，且在L2-SW3/4/5/6的连接PC的Eth0/0/1接口，需要配置为<code>Access模式</code>，并划分归属到对应vlan内。其余的设备之间连接的设置为<code>Trunk模式</code></p>
<p>（2-2）在L2-SW3/4/5/6上配置与上下层接口对应的模式（我这里依旧以L2-SW3来示例）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-174545.png" alt="" width="1245" height="447" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-174545-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-174545-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-174545-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-174545-xl.webp 1024w"></figure>
<p>在L2-SW3的代码部分（L2-SW4/5/6可能稍有不一样，但是思路一样的）：</p>
<pre class="language-cpp line-numbers"><code>[L2-SW3]int g0/0/2
//进入上层g0/0/2口
[L2-SW3-GigabitEthernet0/0/2]port link-type trunk
//配置与其上层一样的接口模式（这里为trunk模式）
[L2-SW3-GigabitEthernet0/0/2]port trunk allow-pass vlan all
//放行所有vlan
//下面的g0/0/2口也是同理
[L2-SW3-GigabitEthernet0/0/2]int g0/0/1
[L2-SW3-GigabitEthernet0/0/1]port link-type trunk
[L2-SW3-GigabitEthernet0/0/1]port trunk allow-pass vlan all

[L2-SW3-GigabitEthernet0/0/1]int e0/0/1
//进入下层e0/0/1接口
[L2-SW3-Ethernet0/0/1]port link-type access
//配置接口模式为access模式
[L2-SW3-Ethernet0/0/1]q
//暂时退出这个接口的配置界面
[L2-SW3]vlan 10
//创建vlan10
[L2-SW3-vlan10]q
//退出vlan10
[L2-SW3]int e0/0/1
//在次进入下层的e0/0/1接口
[L2-SW3-Ethernet0/0/1]port default vlan 10
//划分到属于vlan10</code></pre>
<p>提示部分：L2-SW3/4/5/6会涉及到层的交会，与上层LS-SW的接口需要设置为Trunk模式（并放行所有vlan），与下层涉及到的接口需要配置成Access模式，并且划分到对应vlan内（如果此交换机没有配置vlan，则需要先创建对应vlan。也可以像我一样，配到了这个部分再退出创建vlan，也是一样的效果）<code>*注意</code>：2层交换机创建的vlan不需要配置ip地址</p>
<p>验证部分（这里我在PC1来进行操作，其他的PC设备也是一样的操作）：</p>
<p>（1）在PC1输入对应的ip地址信息（我这里给PC的ip地址是192.168.3.2/24）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-175639.png" alt="" width="1550" height="1057" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175639-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175639-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175639-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175639-xl.webp 1024w"></figure>
<p>（2）使用PC1去给上层配有vlan10的L3-SW1发送ICMP请求（也就是使用PC1去Ping自己的网关验证是否正确）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-175947.png" alt="" width="1545" height="748" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175947-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175947-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175947-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-175947-xl.webp 1024w"></figure>
<p>配置好后，当所有设备都可以Ping通网关，即为成功（下图分别为PC1/2/3/4的截图）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-181828.png" alt="" width="2731" height="1278" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-181828-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-181828-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-181828-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-181828-xl.webp 1024w"></figure>
<h5><strong>习题三：在L3-SW1和L3-SW2之间配置聚合链路，并且设置聚合链路的模式的LACP，设置L3-SW1为主动端</strong></h5>
<p>实操步骤如下：</p>
<p>（1）在L3-SW1上配置Eth-Trunk 23的聚合链路，并设置为主动端（优先级高于SW2就行）</p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]int eth-trunk 23
//创建名叫eth-trunk23的聚合链路
[L3-SW1-Eth-Trunk23]mode lacp-static
//设置模式为lacp模式
[L3-SW1-Eth-Trunk23]q
//暂时退出eth-trunk23
[L3-SW1]lacp priority 100
//配置lacp的系统级的优先级，我这里为主动端，则设置为100，我在L3-SW2会设置成200
[L3-SW1]int eth-trunk 23
//再次进入到eth-trunk23
[L3-SW1-Eth-Trunk23]trunkport GigabitEthernet 0/0/22 to 0/0/23
将需要聚合的端口划分到这个聚合链路里面
[L3-SW1-Eth-Trunk23]port link-type trunk
//设置聚合链路的类型为trunk
[L3-SW1-Eth-Trunk23]port trunk allow-pass vlan all
//放行所有vlan</code></pre>
<p>（2）在L3-SW2上来配置对端的聚合链路（设置L3-SW2的优先级为200）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-205507.png" alt="" width="1242" height="287" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-205507-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-205507-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-205507-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-205507-xl.webp 1024w"></figure>
<p>（聚合链路的数字是自定义的，我这里以需要加入聚合端口号来命名了，是22端口和23端口的组合，2和3，即为23）只需要确保端口号一样即可</p>
<p>验证部分：</p>
<p>（1）这里我是用查看stp的命令来去检查L3-SW2的聚合链路是否创建成功</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-210102.png" alt="" width="1091" height="262" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-210102-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-210102-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-210102-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-210102-xl.webp 1024w"></figure>
<p>可以看到，这里的G0/0/22和23已经合成一个Eth-Trunk 23的虚拟接口了，即为成功</p>
<p>（2）我使用查看刚刚创建的聚合链路指令，看优先级（主/被动端）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ju-He-Lian-Lu-Xiang-Qing.png" alt="" width="1341" height="596" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ju-He-Lian-Lu-Xiang-Qing-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ju-He-Lian-Lu-Xiang-Qing-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ju-He-Lian-Lu-Xiang-Qing-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ju-He-Lian-Lu-Xiang-Qing-xl.webp 1024w"></figure>
<p>提示部分：聚合链路的本质是将交换机的多个端口聚合成一个链路，从而间接地实现增加带宽的效果。在交换机两端配置聚合链路的时候必须确保名字一样（也就是那个0~63的数字）。lacp是聚合链路中的一种模式（交换机自动协商，可设置系统优先级的高或者低）</p>
<h5>习题四：<strong>在L3-SW1和L3-SW2上配置VRRP，其中设置VLAN10，30的Master节点为L3-SW1，设置VLAN20，40的Master节点为L3-SW2</strong></h5>
<p>实操步骤如下：</p>
<p>（1）在L3-SW1/2上，给已经创建的vlan划分新的虚拟ip（不需要配置掩码）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-222119.png" alt="" width="314" height="150" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-222119-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-222119-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-222119-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-222119-xl.webp 1024w"></figure>
<p>我划分的vlan的虚拟ip如上图所示</p>
<p>（1-1）进入L3-SW1的操作如下（配置划分的虚拟ip）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/39/Ping-Mu-Jie-Tu-2026-01-23-221957.png" alt="" width="899" height="259" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-221957-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-221957-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-221957-md.webp 768w ,https://zeyun.dpdns.org/media/posts/39/responsive/Ping-Mu-Jie-Tu-2026-01-23-221957-xl.webp 1024w"></figure>
<p>L3-SW1的配置命令如下：</p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]int vlan10
//进入vlan10
[L3-SW1-Vlanif10]vrrp vrid 10 virtual-ip 192.168.3.254
//创建vrrp，命名为vrrp 10 ，并配置虚拟ip
[L3-SW1-Vlanif10]int vlan20
//进入vlan20
[L3-SW1-Vlanif20]vrrp vrid 20 virtual-ip 192.168.53.254
//创建vrrp，命名为vrrp 20 ，并配置虚拟ip
[L3-SW1-Vlanif20]int vlan30
//进入vlan30
[L3-SW1-Vlanif30]vrrp vrid 30 virtual-ip 192.168.63.254
//创建vrrp，命名为vrrp 30 ，并配置虚拟ip
[L3-SW1-Vlanif30]int vlan40
//进入vlan40
[L3-SW1-Vlanif40]vrrp vrid 40 virtual-ip 192.168.73.254
//创建vrrp，命名为vrrp 40 ，并配置虚拟ip</code></pre>
<p>（1-2）L3-SW2的配置命令如下（相同的点在于vrrp的地址和名称和L3-SW1一模一样）：</p>
<pre class="language-cpp line-numbers"><code>[L3-SW2]int vlan 10
//进入vlan10的配置界面
[L3-SW2-Vlanif10]vrrp vrid 10 virtual-ip 192.168.3.254
//创建vrrp，命名为vrrp 10 ，配置与L3-SW1同样的虚拟ip地址
[L3-SW2-Vlanif10]int vlan 20
//进入vlan20的配置界面
[L3-SW2-Vlanif20]vrrp vrid 20 virtual-ip 192.168.53.254
//创建vrrp，命名为vrrp 20，配置与L3-SW1同样的虚拟ip地址
[L3-SW2-Vlanif20]int vlan 30
//进入vlan 30的配置界面
[L3-SW2-Vlanif30]vrrp vrid 30 virtual-ip 192.168.63.254
//创建vrrp，命名为vrrp 30，配置与L3-SW1同样的虚拟ip地址
[L3-SW2-Vlanif30]int vlan 40
//进入vlan40的配置界面
[L3-SW2-Vlanif40]vrrp vrid 40 virtual-ip 192.168.73.254
//创建vrrp，命名为vrrp 40，配置与L3-SW1同样的虚拟ip地址</code></pre>
<p>（2）设置主/次优先级（也成为Master节点）</p>
<p><strong><code>*核心</code>：优先级越大，则为Master</strong></p>
<p>（2-1）提高在L3-SW1的vlan10，30的优先级</p>
<pre class="language-cpp line-numbers"><code>//进入L3-SW1操作
[L3-SW1]int vlan 10
//进入需要配置的vlan，这里是vlan10
[L3-SW1-Vlanif10]vrrp vrid 10 priority 120
//提高虚拟id的优先级为120
[L3-SW1-Vlanif10]int vlan 30
//进入vlan30
[L3-SW1-Vlanif30]vrrp vrid 30 priority 120 
//同样提高优先级，在这个L3-SW1上设置为Master</code></pre>
<p>（2-2）在L3-SW2配置vlan20，40</p>
<pre class="language-cpp line-numbers"><code>//L3-SW2操作如下
[L3-SW2]int vlan 20
[L3-SW2-Vlanif20]vrrp vrid 20 priority 120
[L3-SW2-Vlanif20]int vlan 40
[L3-SW2-Vlanif40]vrrp vrid 40 priority 120
//都是相同操作，只不过换vlan了</code></pre>
<p>验证部分：</p>
<p> </p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>网络设备配置实战分析 Part 5</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/network_with_huawei_ensp_part5.html"/>
        <id>https://zeyun.dpdns.org/network_with_huawei_ensp_part5.html</id>
            <category term="网络设备配置技术学习笔记"/>

        <updated>2026-01-09T17:55:03+08:00</updated>
            <summary>
                <![CDATA[
                    本章内容如下 i：什么是NAT协议？ ii：有关NAT协议的小实验 A：NAT 策略是防火墙&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <blockquote>
<p><strong>本章内容如下</strong></p>
<p><strong>i：</strong>什么是NAT协议？</p>
<p><strong>ii：</strong>有关NAT协议的小实验</p>
</blockquote>
<h5>Q：什么是NAT协议？</h5>
<p>A：NAT 策略是<strong>防火墙 / 路由器上用来控制 “哪些流量需要做地址转换” 的规则</strong>，简单说就是 “指定哪些设备、访问哪些目标时，要把内网 IP 换成公网 IP”</p>
<h5>Q：NAT协议和ACL有啥区别？</h5>
<p>A：<strong>ACL 规则（访问控制列表）</strong>可以理解为是 “交通信号灯”，负责判断流量能不能过<strong>（允许 / 拒绝某类流量）</strong>比如 “允许 192.168.10.X 网段的设备上网，拒绝 192.168.20.X 网段的设备上网”</p>
<p><strong>NAT 策略，</strong>可以理解为 “地址翻译机”，负责把流量的 IP 地址换掉<strong>（把内网 IP 转成公网 IP）</strong>比如 “让 192.168.10.X 网段的设备，访问外网时用路由器的公网 IP”，这是 NAT 策略的活</p>
<p>简单来说，可以把网络的世界理解成就像搭乘高铁，NAT可以理解为票据，你没有票据，就不能上高铁，而ACL就类似于你票据的详细信息（比如，你的登车口，你的座位号等等），当之后你有了车票，和座位号，也就能正常出发，上网冲浪了（当然，如果没有ACL也行，因为有的票据可以类似于站票一样，没有固定座位，也能到达目的地）</p>
<h4 class="align-center">基于NAT协议的实验</h4>
<p>网路拓扑如下：<a href="https://wwbte.lanzn.com/b014wzqvij" target="_blank" rel="noopener noreferrer">点我下载</a></p>
<p>密码：7v6z</p>
<p>拓扑概述：以下为拓扑全貌，主要实现商业和工程区可以访问外部服务器，但是内部的橙色的网络部分不能被外部访问到，而且还要配置NAT转换，仅仅为来自互联网的机器能访问到企业内部的WWW服务器的访问（对外网仅开放vlan10和20的网段的终端设备，不开放vlan10和20的服务器和其他的10网段的内容，但是开放10的WWW服务器）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-13-000441.png" alt="" width="2425" height="1417" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-13-000441-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-13-000441-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-13-000441-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-13-000441-xl.webp 1024w"></figure>
<p class="align-center"><strong>题目一：使用NAT服务，实现企业区域能连接到互联网区域的网络设备</strong></p>
<h5><strong>步骤一：</strong>配置基础的设备IP信息</h5>
<p>以下为AR4与AR2路由器的设置（这里配置202.108.100网段是用于模拟公网IP）</p>
<pre class="language-cpp line-numbers"><code>//以下为AR2配置IP的过程
[AR2]int g0/0/0
[AR2-GigabitEthernet0/0/0]ip address 202.108.100.2 24

//以下为AR4的配置IP部分
[AR4]int g4/0/0
[AR4-GigabitEthernet4/0/0]ip address 202.108.100.1 24</code></pre>
<p>测试连通性：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-09-230446.png" alt="" width="1246" height="436" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-230446-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-230446-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-230446-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-230446-xl.webp 1024w"></figure>
<p>没问题之后，配置AR2管辖下的设备IP信息（需注意，这里不同的端口会涉及到不同的网段设备，G0/0/0是108网段，而G0/0/1是109网段的）</p>
<pre class="language-cpp line-numbers"><code>//进入AR2的G0/0/0口，配置108网段IP地址
[AR2]int g0/0/0
[AR2-GigabitEthernet0/0/0]ip add 202.108.100.2 24

//继续进入这个G0/0/1口，配置109段的IP地址
[AR2]int g0/0/1
[AR2-GigabitEthernet0/0/1]ip add 202.109.100.1 24</code></pre>
<p>可以使用109网段内的设备，去Ping 202.109.100.1（也就是刚刚配的AR2的IP）的这个IP即可验证（可以看到我这里Ping了4次，能成功）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-12-222029.png" alt="" width="1452" height="1003" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-222029-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-222029-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-222029-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-222029-xl.webp 1024w"></figure>
<h5>步骤二：配置Server2的www服务（如下图所示，正常启动即可）</h5>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-09-231412.png" alt="" width="1468" height="976" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-231412-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-231412-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-231412-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-09-231412-xl.webp 1024w"></figure>
<h5>步骤三：在AR4配置IP地址NAT转发（默认路由）</h5>
<pre class="language-cpp line-numbers"><code>//进入OSPF 1
[AR4]ospf 1
//配置动态路由协议，让路由器把自己的 “默认路由”，通过动态路由协议 “告诉” 其他邻居路由器
[AR4-ospf-1]default-route-advertise

//使用dis this查看效果
[AR4-ospf-1]dis this 
[V200R003C00]
#
ospf 1 
 default-route-advertise
 area 0.0.0.0 
  network 10.0.0.0 0.0.0.255 
  network 10.1.1.0 0.0.0.255 
  network 10.2.2.0 0.0.0.255 
#
return
//可以看到，已经配置成功</code></pre>
<p>使用<code>dis ip routing-table protocol ospf</code>命令验证下层设备的实际应用情况</p>
<p>在下层的这个三层交换机上查看这个配置情况（这里我以L3-SW7为例，L3-SW8也是同理）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-12-220457-2.png" alt="" width="1305" height="886" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-220457-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-220457-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-220457-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-220457-2-xl.webp 1024w"></figure>
<p>在上图中的红色框选区域，可以看到，这里已经配置好了默认路由，且下一跳的地址为10.0.0.1（如上图的蓝色区域所示）</p>
<h5>步骤四：继续在这个AR4配置NAT转发的规则</h5>
<pre class="language-cpp line-numbers"><code>//创建NAT2000的这个ACL规则
[AR4]acl name nat 2000
//创建规则，rule5和rule10允许192.168.10/20的两个网段的网络通过
[AR4-acl-basic-nat]rule 5 permit source 192.168.10.0 0.0.0.255//此处为允许10网段通过的部分
[AR4-acl-basic-nat]rule 10 permit source 192.168.20.0 0.0.0.255//此处为允许20网段通过的部分
//查看配置情况
[AR4-acl-basic-nat]dis this 
[V200R003C00]
#
acl name nat 2000  
 rule 5 permit source 192.168.10.0 0.0.0.255 
 rule 10 permit source 192.168.20.0 0.0.0.255 
#
return
//可以看到这里的两条规则，则表示已经配置成功了

//进入g4/0/0
[AR4-acl-basic-nat]int g4/0/0
//将这个信息配置应用在g4/0/0口上
[AR4-GigabitEthernet4/0/0]nat outbound 2000

//使用dis this命令查看配置信息
[AR4-GigabitEthernet4/0/0]dis this
[V200R003C00]
#
interface GigabitEthernet4/0/0
 ip address 202.108.100.1 255.255.255.0 
 nat outbound 2000
#
return
//可以看到，已经生效了</code></pre>
<p><strong>测试AR2与AR4的连通性</strong></p>
<p>下图可以看到，这个AR2去Ping来自对端IP以及对端路由器的所有IP是可以Ping通的（202.108.100.2为路由器的对端IP，而202.109.100.2为109段的网络设备）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ce-Shi-Mo-Ren-Lu-You-Qing-Kuang.png" alt="" width="1303" height="880" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ce-Shi-Mo-Ren-Lu-You-Qing-Kuang-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ce-Shi-Mo-Ren-Lu-You-Qing-Kuang-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ce-Shi-Mo-Ren-Lu-You-Qing-Kuang-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ce-Shi-Mo-Ren-Lu-You-Qing-Kuang-xl.webp 1024w"></figure>
<p><strong>验证一：</strong>再次使用这个来自于vlan20的PC7去Ping202.109.100.3的这个服务器（只要是109网段下的任何一台设备都行，我这里为了对比，所以选择的是服务器）发现可以Ping通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-12-230728.png" alt="" width="1559" height="1058" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-230728-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-230728-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-230728-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-230728-xl.webp 1024w"></figure>
<p><strong>验证二：</strong>使用来自109网段（互联网）的PC去Ping企业内部服务器（IP为10.2.2.3）和PC5（IP为10.2.2.2）就不能Ping通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-12-233419.png" alt="" width="1537" height="1046" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233419-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233419-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233419-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233419-xl.webp 1024w"></figure>
<p><strong>验证三：</strong>使用外网的客户端（Cilent3），访问内网服务器（Server1，IP为10.2.2.3）发现目前还并不能访问</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-12-233717.png" alt="" width="1450" height="999" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233717-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233717-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233717-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-233717-xl.webp 1024w"></figure>
<p>Q：奇怪，是我错了吗？为啥能Ping通除了公司内网以外的主机，而不能访问所以的服务器以及内网的主机？？？</p>
<p>A：并没有错，公司内网在先前划分ACL的时候并没有将这个公司内外网的网段加入其中，所以访问不了，是正常的。至于服务器访问层面，只不过还没配<span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">NAT Server策略，将这个服务器映射到公网中，所以在没有配之前，是不会有响应的</span></p>
<h5>步骤三：<span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit;">此时继续创建一个NAT Server策略，</span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit;">将内网10.2.2.3的www服务映射到AR4中G4/0/0的8080端口上</span></h5>
<pre class="language-cpp line-numbers"><code>//进入G4/0/0端口
[AR4]int g4/0/0
//配置NAT转发
[AR4-GigabitEthernet4/0/0]nat server protocol tcp global current-interface 8080 inside 10.2.2.3 www
//以下为含义解释
//nat server：启用NAT服务（端口映射服务）
//protocol tcp：将这个协议指定为TCP
//global current-interface 8080：外网使用G4/0/0的配置的IP，并开放8080的端口
//inside 10.2.2.3 www：内网的IP是10.2.2.3，服务为WWW（端口为80）</code></pre>
<p><strong>验证：</strong>使用来自109网段（互联网的客户机）去访问边界IP，发现可以成功访问内网服务器</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/38/Ping-Mu-Jie-Tu-2026-01-12-235758.png" alt="" width="1460" height="1008" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-235758-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-235758-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-235758-md.webp 768w ,https://zeyun.dpdns.org/media/posts/38/responsive/Ping-Mu-Jie-Tu-2026-01-12-235758-xl.webp 1024w"></figure>
<p class="align-center"><strong>至此，本实验全部结束</strong></p>
<p class="align-center"><strong>那么本章内容到此结束，感谢您的阅读，我们下一期见 (o_ O)ﾉ</strong></p>
<p class="align-center"><strong>综合练习 Part 6已经更新：<a href="https://zeyun.dpdns.org/network_with_huawei_ensp_part6.html">点我跳转</a></strong></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>网络设备配置实战分析 Part 4</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/network_with_huawei_ensp_part4.html"/>
        <id>https://zeyun.dpdns.org/network_with_huawei_ensp_part4.html</id>
            <category term="网络设备配置技术学习笔记"/>

        <updated>2026-01-04T21:29:17+08:00</updated>
            <summary>
                <![CDATA[
                    本章内容如下 （1）简单介绍ACL （2）ACL 2000-2999（基本 /&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <blockquote>
<h4>本章内容如下</h4>
<p>（1）简单介绍ACL<br>（2）ACL 2000-2999（基本 / 标准）的配置实验<br>（3）ACL 3000-3999（高级 / 扩展）的配置实验</p>
</blockquote>
<h5><strong>Q：什么是ACL？</strong></h5>
<p><strong>A: </strong>ACL 是 “访问控制列表（Access Control List）” 的缩写，是网络设备（如路由器、交换机）上的一种<strong>安全技术规则</strong>集合，用来对经过设备的数据包进行 “允许 / 拒绝” 的权限判断，从而实现流量过滤、访问控制等功能</p>
<h5><strong>Q：ACL的应用有哪些？</strong></h5>
<p><strong>A：</strong></p>
<ol class="auto-hide-last-sibling-br">
<li>过滤网络流量：比如拒绝特定 IP 的数据包通过设备</li>
<li>控制资源访问：限制某些主机访问服务器、特定服务（如 HTTP）</li>
<li>配合其他技术：比如和 NAT、QoS 结合，实现更精细的网络管理</li>
<li>提升网络安全：阻挡非法访问、减少网络攻击风险</li>
</ol>
<p class="align-center"><strong>粗略的来说，ACL的核心功能是实现数据的过滤操作</strong></p>
<h5>ACL的实验&amp;配置过程（包含ACL2000和ACL3000）</h5>
<p>让我们继续沿用之前的<a href="https://zeyun.dpdns.org/network_with_huawei_ensp_part3.html" target="_blank" rel="noopener noreferrer">网络设备配置实战分析Part3</a>配置拓扑的基础之上，来稍微简化一些去讲解ACL部分的内容（当然，为了更好的实现ACL的理解和实验，我会将配置好基础环境的拓扑提供给大家下载）</p>
<p>拓扑：<a href="https://wwbte.lanzn.com/b014wz3opg" target="_blank" rel="noopener noreferrer">点我下载</a>，密码：hb93</p>
<p>拓扑图如下所示：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-04-215253.png" alt="" width="2379" height="1412" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-04-215253-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-04-215253-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-04-215253-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-04-215253-xl.webp 1024w"></figure>
<p><strong>拓扑介绍：</strong>三层路由及三层交换机上配置OSPF（路由id：R4为0.0.0.0，SW7为1.1.1.1，SW8为2.2.2.2），在SW7和SW8配置聚合链路，并将SW7设置为根桥（SW5为傻瓜交换机，不做任何配置，这里仅作为集线器使用），此外在这个和Part3一样的拓扑之上，添加Server端和Client端，用于测试ACL的HTTP访问的拦截效果</p>
<p>由于这个拓扑本人已经在<a href="https://zeyun.dpdns.org/network_with_huawei_ensp_part3.html" target="_blank" rel="noopener noreferrer">网络设备安全配置实战分析 Part3</a>做过详细的讲解，那么这里我会提供已经配置好以上基础（指的是OSPF，链路聚合，vlan划分等等）配置的拓扑，涉及到ACL相关的内容，我才会在以下实验中提及</p>
<pre class="language-cpp line-numbers"><code>常见的命令如下：
[huawei]dis acl all
//查看所有acl（必须要在全局模式下）
[huawei]undo acl all
//删除所有acl（部分acl需要进入端口，使用dis this 查看acl相关的命令，
//再去输入undo + 这个acl命令即可）
[huawei]acl + 端口号
//配置acl
[huawei]dis acl
//查看当前acl
[huawei]undo acl name deny10-3
//若有改名/编号的需求，需要彻底删除这个acl配置，再重新覆盖（我这里以deny10-3为例）
[huawei]acl number 3000 name deny10-3
[huawei]acl name deny10-3 3000
//这两个都行的，只需要正常加上编号即可
</code></pre>
<p><strong>实验一：使得10和20网段的所有机器都能访问Server服务器端提供的Http服务</strong></p>
<p>题目解构：理论上给这个不同网段的IP，那么该网段下的机器就可以实现访问（因为华为的ENSP不支持在PC机上直接操作，所有这里我配置在独立的Client客户机上来测试Http服务）</p>
<p><strong>步骤一：</strong>给服务器的Http选项打开</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Qi-Dong-httpFu-Wu-Qi.png" alt="" width="1995" height="1016" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Qi-Dong-httpFu-Wu-Qi-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Qi-Dong-httpFu-Wu-Qi-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Qi-Dong-httpFu-Wu-Qi-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Qi-Dong-httpFu-Wu-Qi-xl.webp 1024w"></figure>
<p>之后点击“启动”即可</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-05-214324.png" alt="" width="1458" height="1010" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214324-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214324-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214324-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214324-xl.webp 1024w"></figure>
<p><strong>步骤二：</strong>配置Client客户机IP</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/CilentHuan-ip.png" alt="" width="1457" height="1113" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/CilentHuan-ip-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/CilentHuan-ip-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/CilentHuan-ip-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/CilentHuan-ip-xl.webp 1024w"></figure>
<p><strong>验证实验：</strong></p>
<p>可以看到，在点击获取后会得到一个网页的下载信息（这里和我图中一样的就是正常的），之后点击取消就行，测试能否连通的，该文件不需要保存</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-05-214804.png" alt="" width="1458" height="1119" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214804-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214804-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214804-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-214804-xl.webp 1024w"></figure>
<p><strong>实验二：使得左侧的10网段不能访问Http服务，20网段可以实现访问</strong></p>
<p>题目解构：在R4的G0/0/2口配置对应的出站丢弃有关于Http访问的包的ACL即可</p>
<p><strong>步骤一：</strong>安装以下的代码步骤来配置ACL 2000（这里我取别名”deny-10“）</p>
<pre class="language-cpp line-numbers"><code>&lt;AR4&gt;sys
//进入特权模式
[AR4]acl name deny-10 2000
//配置acl，我这里给我的这个acl命名为“deny-10”（名字可有可无，但后面一定要加上2000）
[AR4-acl-basic-deny-10]rule 5 deny ip source 192.168.10.0 0.0.0.255
//配置acl 2000，我这里写的是拒绝来自ip为192.168.10.0的任何网络设备（语法如上所示）
[AR4-acl-basic-deny-10]int g0/0/2
//输入int命令，进入g0/0/2口
[AR4-GigabitEthernet0/0/2]traffic-filter outbound  acl 2000
//使用“traffic-filter”命令，应用出站规则（outbound）为之前定的acl 2000
[AR4-GigabitEthernet0/0/2]dis this
//使用dis this查看是否成功

//输出以下则为成功，可以看到这个“deny-10”以及成功应用到了g0/0/2口了
[V200R003C00]
#
interface GigabitEthernet0/0/2
 ip address 10.2.2.1 255.255.255.0 
 traffic-filter outbound acl name deny-10
#
return</code></pre>
<p><strong>步骤二：</strong>再次使用来自于这个10网段的设备取连接Http服务器</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-05-221209.png" alt="" width="1461" height="1117" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221209-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221209-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221209-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221209-xl.webp 1024w"></figure>
<p>可以看到，这里我们已经不能访问Http服务器了（包括处于10网段的PC6也不能访问服务器，但是处于20网段的PC7就可以正常访问）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-05-221420.png" alt="" width="2402" height="1418" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221420-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221420-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221420-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-221420-xl.webp 1024w"></figure>
<p><strong>实验三：使得仅192.168.10.3这个IP，不能访问20网段的内容，其余可以访问</strong></p>
<p>题目解构：需要在SW7的G0/0/2口，SW8的G0/0/1口，配置来自于10网段的这个指定的IP的拒绝ACL即可（为保证聚合链路的畅通，不在SW7/8的G0/0/23&amp;24端口做acl）</p>
<p>这里不同于ACL 2000，我们需要用到更精细化的ACL 3000，来实现阻止精确的IP访问</p>
<p>在这个实验开始之前可以看到，这里的PC6和PC7都是可以正常访问的（这里我使用IP为192.168.10.3的客户端，去Ping来自于20网段的机器，是可以ing通的）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-05-224331.png" alt="" width="1447" height="1106" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-224331-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-224331-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-224331-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-224331-xl.webp 1024w"></figure>
<p><strong>步骤一：</strong>在SW7的G0/0/2口设置ACL 3000 ，精确阻止来自192.168.10.3的IP流量（如下图所示）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/10to20_2.png" alt="" width="2239" height="1390" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/10to20_2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/10to20_2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/10to20_2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/10to20_2-xl.webp 1024w"></figure>
<p><strong>代码如下：</strong></p>
<pre class="language-cpp line-numbers"><code>&lt;SW7&gt;system-view 
//进入系统视图
[SW7]acl name deny10-3
//命名为”deny10-3“
[SW7-acl-adv-deny10-3]rule 5 deny ip source 192.168.10.3 0.0.0.255 destination 192.168.20.0 0.0.0.255
//配置为拒绝192.168.10.3这个ip访问目标为192.168.20.0的网段
[SW7-acl-adv-deny10-3]rule 10 permit ip source any destination any 
//允许其他的流量经过
[SW7-acl-adv-deny10-3]int g0/0/2
//进入g0/0/2端口
[SW7-GigabitEthernet0/0/2]traffic-filter outbound acl 3999
//应用这个规则（名字和编号都可以）

//使用dis this看一下，可以看到，这里已经为”deny10-3“了（我忘记加这个3000，默认就最后了）
[SW7-GigabitEthernet0/0/2]dis this 
#
interface GigabitEthernet0/0/2
 port link-type trunk
 port trunk allow-pass vlan 2 to 4094
 traffic-filter outbound acl name deny10-3
#
return</code></pre>
<p><strong>步骤二：</strong>在SW8上去阻止192.168.10.3的流量（如下图所示）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/10to20_1.png" alt="" width="2275" height="1384" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/10to20_1-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/10to20_1-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/10to20_1-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/10to20_1-xl.webp 1024w"></figure>
<p><strong>代码如下：</strong></p>
<pre class="language-cpp line-numbers"><code>&lt;SW8&gt;system-view 
//进入系统视图
[SW8]acl name deny10-3 3000
//配置”deny10-3“，3000的规则
[SW8-acl-adv-deny10-3]rule 5 deny ip source 192.168.10.3 0.0.0.255 destination 192.168.20.0 0.0.0.255
//拒绝192.168.10.3，至目标的192.168.20.0网段
[SW8-acl-adv-deny10-3]rule 10 permit ip source any destination any 
//放行其他的端口
[SW8-acl-adv-deny10-3]int g0/0/1
//进入g0/0/1的端口
[SW8-GigabitEthernet0/0/1]traffic-filter outbound acl 3000
//应用acl 3000规则

//使用dis this查看，可以看到这个已经生效了
[SW8-GigabitEthernet0/0/1]dis this 
#
interface GigabitEthernet0/0/1
 port link-type trunk
 port trunk allow-pass vlan 2 to 4094
 traffic-filter outbound acl name deny10-3
#
return</code></pre>
<p><strong>验证成果：</strong></p>
<p>可以看到已经成功了，这个IP为192.168.10.3的客户机已经Ping不通192.168.20.0网段的主机了</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/37/Ping-Mu-Jie-Tu-2026-01-05-233235.png" alt="" width="1456" height="1113" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-233235-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-233235-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-233235-md.webp 768w ,https://zeyun.dpdns.org/media/posts/37/responsive/Ping-Mu-Jie-Tu-2026-01-05-233235-xl.webp 1024w"></figure>
<p class="align-center">至此，本章内所有有关于ACL的实验已经完成</p>
<p class="align-center">感谢您的观看 (´▽`ʃ♡ƪ)</p>
<p class="align-center">此外</p>
<p class="align-center">Part 5 NAT协议篇已更新，<a href="https://zeyun.dpdns.org/network_with_huawei_ensp_part5.html">点我跳转</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>下载来自Apple Music的音乐</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/applemusic_download.html"/>
        <id>https://zeyun.dpdns.org/applemusic_download.html</id>
            <category term="Apple Music相关"/>

        <updated>2026-01-03T23:04:16+08:00</updated>
            <summary>
                <![CDATA[
                    实现这个的前提是你得有开通Apple Music的账号（不限区域） 本章用到的工具来自于Github大佬做的开源工具 文件下载：点我下载 Github连接：点我跳转&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h6>实现这个的前提是你得有开通Apple Music的账号（不限区域）</h6>
<blockquote>
<h6>本章用到的工具来自于Github大佬做的开源工具</h6>
<p>文件下载：<a href="https://www.ilanzou.com/s/JFRn77Hp" target="_blank" rel="noopener noreferrer">点我下载</a></p>
<p>Github连接：<a href="https://github.com/wenfeng110402/AppleMusic-Downloader/releases" target="_blank" rel="noopener noreferrer">点我跳转</a></p>
</blockquote>
<h5>前期工作：下载这个文件（我准备了蓝奏云的连接，以方便下载）</h5>
<p>下载后你会看到有两个文件分别为：</p>
<ol>
<li>AppleMusicDownloader.exe --核心下载软件</li>
<li>OpenCookies.txt.crx --获取浏览器cookie的浏览器插件</li>
</ol>
<h5>步骤一：安装Edge拓展，获取cookie</h5>
<p>（1）打开Edge的拓展选项</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Da-Kai-Xuan-Xiang.png" alt="" width="1169" height="1348" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Da-Kai-Xuan-Xiang-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Da-Kai-Xuan-Xiang-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Da-Kai-Xuan-Xiang-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Da-Kai-Xuan-Xiang-xl.webp 1024w"></figure>
<p>（2）打开开发人员选项</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-204448.png" alt="" width="662" height="922" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-204448-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-204448-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-204448-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-204448-xl.webp 1024w"></figure>
<p>（3）将这个下载的<code>OpenCookies.txt.crx</code>拖入这个Edge的拓展里</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-205443.png" alt="" width="2408" height="1044" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205443-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205443-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205443-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205443-xl.webp 1024w"></figure>
<h5>步骤二：打开Apple Music的这个网页端，并登录账号到网页端</h5>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-205854.png" alt="" width="1777" height="1133" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205854-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205854-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205854-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-205854-xl.webp 1024w"></figure>
<h5>步骤三：使用Edge插件获取cookie文件</h5>
<p>（1）在Apple Music的这个网页端，随便找到一个歌曲的界面，打开插件，点击下图的按钮</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/apDe-Cha-Jian.png" alt="" width="2752" height="1531" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/apDe-Cha-Jian-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/apDe-Cha-Jian-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/apDe-Cha-Jian-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/apDe-Cha-Jian-xl.webp 1024w"></figure>
<p>（2）将这个获取到的这个文件下载并存好（存在一个你记住的地方，后面文件地址会有用）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-213622.png" alt="" width="698" height="204" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-213622-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-213622-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-213622-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-213622-xl.webp 1024w"></figure>
<h5>步骤四：使用AppleMusicDownloader，下载音乐</h5>
<p>（1）双击打开之前下载的应用程序，选择之前保存的cookie路径（每个人的文件保存路径不一样，请根据实际的来，不要一味的照抄）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-223339.png" alt="" width="2879" height="1702" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223339-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223339-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223339-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223339-xl.webp 1024w"></figure>
<p>（2）选择下载后的保存路径（一会下载的音乐文件会直接出现在这里）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-223547.png" alt="" width="2879" height="1695" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223547-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223547-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223547-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-223547-xl.webp 1024w"></figure>
<p>（3）去复制一首你需要下载的音乐连接（这里我以《す、好きなんかじゃない!》来示例）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/apKao-Bei-Lian-Jie.png" alt="" width="2303" height="1364" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/apKao-Bei-Lian-Jie-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/apKao-Bei-Lian-Jie-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/apKao-Bei-Lian-Jie-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/apKao-Bei-Lian-Jie-xl.webp 1024w"></figure>
<p>（4）将刚刚拷贝的链接粘贴进这个里面，以及可以下载的音频/视频格式（这里我以flac的格式来演示）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/apdXuan-Ze.png" alt="" width="2879" height="1691" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/apdXuan-Ze-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/apdXuan-Ze-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/apdXuan-Ze-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/apdXuan-Ze-xl.webp 1024w"></figure>
<h5>步骤五：验证结果</h5>
<p>可以看到，之前选择的保存路径下出现了我们选择的格式文件</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/36/Ping-Mu-Jie-Tu-2026-01-03-225554.png" alt="" width="1925" height="1532" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-225554-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-225554-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-225554-md.webp 768w ,https://zeyun.dpdns.org/media/posts/36/responsive/Ping-Mu-Jie-Tu-2026-01-03-225554-xl.webp 1024w"></figure>
<p> </p>
<p class="align-center"><strong>那么本篇的内容就到这里结束了</strong></p>
<p class="align-center"><strong>感谢您的观看，您的肯定是我继续更新的动力♪(´▽｀)</strong></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>网络设备配置实战分析 Part 3</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/network_with_huawei_ensp_part3.html"/>
        <id>https://zeyun.dpdns.org/network_with_huawei_ensp_part3.html</id>
            <category term="网络设备配置技术学习笔记"/>

        <updated>2025-12-12T23:16:59+08:00</updated>
            <summary>
                <![CDATA[
                    本次项目实验目标： 环境准备：点我下载，密码：dqg6 Step1：先给我们的所有PC机以及各种设备，重命名，配置对应的网路地址和关闭Debug调试（这里我依旧以PC1，L2-SW1，L3-AR1为例）其余设备也是同理 PC1配置如下：（tips：PC3的网关就是与AR1连接的端口IP哦~） L2-SW1配置如下：&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>本次项目实验目标：</p>
<ul style="list-style-type: square;">
<li>实现全网互通（包含OSPF，不同网段vlan规划）</li>
<li>冗余网关协议（包含聚合链路，VRRP实验）</li>
<li>生成树协议STP&amp;MSTP（含测试实验&amp;拓扑扩展）</li>
</ul>
<p>环境准备：<a href="https://wwbte.lanzn.com/b014wyb2zg" target="_blank" rel="noopener noreferrer">点我下载</a>，密码：dqg6</p>
<h4 class="align-center"><strong>全图总览如下</strong></h4>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-012607.png" alt="" width="2381" height="1383" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-012607-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-012607-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-012607-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-012607-xl.webp 1024w"></figure>
<h4 class="align-center">实验一：实现全网互通</h4>
<p class="align-left"><span style="color: #e03e2d;">Step1：</span>先给我们的所有PC机以及各种设备，重命名，配置对应的网路地址和关闭Debug调试（这里我依旧以PC1，L2-SW1，L3-AR1为例）其余设备也是同理</p>
<p class="align-left">PC1配置如下：（tips：PC3的网关就是与AR1连接的端口IP哦~）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-12-235926.png" alt="" width="1545" height="1055" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-12-235926-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-12-235926-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-12-235926-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-12-235926-xl.webp 1024w"></figure>
<p class="align-left">L2-SW1配置如下：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-000347.png" alt="" width="1309" height="468" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000347-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000347-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000347-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000347-xl.webp 1024w"></figure>
<p class="align-left">L3-AR1配置如下：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-000228.png" alt="" width="1298" height="497" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000228-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000228-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000228-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-000228-xl.webp 1024w"></figure>
<p class="align-left"><span style="color: #e03e2d;">Step2：</span>进入各个设备的对应端口，配置基础信息</p>
<p class="align-left">先创建几个vlan以便后续的操作（vlan2 ，vlan10，vlan20）</p>
<ul class="align-center">
<li class="align-left">vlan2：用于给三层的交换机配IP</li>
<li class="align-left">vlan10：用于给PC1以及第二层的交换机配IP用</li>
<li class="align-left">vlan20：同理，用于给PC2以及对应的第二层的交换机配IP用</li>
</ul>
<p class="align-left">我这里依旧以L3-SW1示例：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-001931.png" alt="" width="1280" height="170" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-001931-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-001931-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-001931-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-001931-xl.webp 1024w"></figure>
<pre class="language-c line-numbers"><code>[L3-SW1]vlan batch 2 10 20</code></pre>
<p class="align-left">使用 vlan batch 命令，可以同时配置多条vlan</p>
<p class="align-left">其次进入对应的vlan，去给他们分配IP地址</p>
<p class="align-left"><code>*注：</code>在L3-SW1/2上的vlan2/10/20都不是同一个，都需要进入对应机器去单独配置</p>
<p class="align-left">例如（我这里在L3-SW1上配的vlan2就和L3-SW2的不同）<strong>目前只需要关注我标记出来的就行</strong></p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/L3-SW1-VLANID.png" alt="" width="827" height="452" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW1-VLANID-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW1-VLANID-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW1-VLANID-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW1-VLANID-xl.webp 1024w"></figure>
<p class="align-left">上图为L3-SW1，下图为L3-SW2（<strong>目前先看标记的就行，其余的不着急配</strong>）</p>
<p>看细节，这里我的L3-SW1/2的配置的同为vlan20的<strong>ip最后一位不同</strong>（此处的ip千万不能相同，否则会出现后期配VRRP的Master时候，会为双Master，不过就算配错，解决办法后面也有，往下看就行，别担心）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/L3-SW2-VLANID.png" alt="" width="838" height="446" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW2-VLANID-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW2-VLANID-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW2-VLANID-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/L3-SW2-VLANID-xl.webp 1024w"></figure>
<p class="align-left">那么这个IP地址怎么去看呢？很简单，看连接的端口IP就行。例如我这个L3-SW1的vlan2的IP地址，就是来自于上层路由的连接端口的IP</p>
<p class="align-left"><span style="color: #e03e2d;">Step3：</span>在vlan的信息划分好之后，我们需要进入这个对应的端口，去把刚刚创建的vlan给它加入进来（我这里仅演示了L3-SW1的过程，L3-SW2也是同样的配置方法）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-004012.png" alt="" width="1256" height="542" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-004012-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-004012-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-004012-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-004012-xl.webp 1024w"></figure>
<p class="align-left">这里我设置 g/0/22 口的解释之后的步骤分别是：</p>
<ol class="align-left">
<li>进入 g0/0/22 口</li>
<li>设置 g0/0/22 的端口类型为<code>Access</code>模式（简单来说，是给连接终端设备，PC，服务器等用的“专属通道“，只走一个 vlan 的流量的模式）</li>
<li>将之前配置的 vlan2 划分给 g0/0/22 口</li>
</ol>
<p class="align-left">设置 g0/0/1 口的步骤解释起来分别是：</p>
<ol class="align-left">
<li>进入 g0/0/1 口</li>
<li>设置 g0/0/1 的端口类型为<code>Trunk </code>模式（这个模式与Access模式不同的是，这个Trunk模式就是给“交换机之间”用的“共享通道”，使得设备之间的通讯能同时走多个 vlan 的流量）</li>
<li>设置放行所有流量（通常不会这样做，但这里是实验环境，所以我就全部放行了）</li>
</ol>
<p class="align-left"> g0/0/2 也是和 g0/0/1 同理，这里我就不过多赘述了</p>
<p class="align-left"><span style="color: #e03e2d;">Step4：</span>我比较习惯从下网上配，所以在L3-SW1/2的准备工作做好了之后（也就是在创建好基础的vlan之后）我们先进入L2-SW1/2的 Ethernet 0/0/1 口，去配置与PC1相连接的接口模式</p>
<pre class="language-cpp line-numbers"><code>[L2-SW1]vlan 10
[L2-SW1-vlan10]q
//创建vlan10，并退出这个vlan的视图（IP地址不在这里配）
[L2-SW1-Ethernet0/0/1]int vlan 10
//使用int命令，进入vlan10
[L2-SW1-Vlanif10]ip address 192.168.10.254 24
//配置IP（IP地址+子网掩码）
[L2-SW1]int e0/0/1
//进入e0/0/1
[L2-SW1-Ethernet0/0/1]port link-type access 
//设置端口模式为access
[L2-SW1-Ethernet0/0/1]port default vlan 10
//划分vlan10到这个端口内</code></pre>
<p class="align-left">别忘了在L2-SW1/2还是有两根线连接着L3-SW1/2的（<strong>GE0/0/1，GE0/0/2</strong>口），所以你还需要进入这<strong>两个口</strong>里去配置接口模式，我这里依旧以PC1所对应的L2-SW1演示</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-011844.png" alt="" width="997" height="190" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011844-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011844-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011844-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011844-xl.webp 1024w"></figure>
<p class="align-left">这里的思路依旧是：系统视图下→进入对应的端口→设置模式为<code>Trunk</code>模式→放行所有端口</p>
<p class="align-left">这里使用PC1去Ping网关验证，看看能否Ping通对应网关（PC1的就是之前设置的192.168.10.254的那个）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-011004.png" alt="" width="1083" height="515" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011004-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011004-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011004-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-011004-xl.webp 1024w"></figure>
<p class="align-left">可以看到，我这里已经验证成功</p>
<p class="align-left">这里的PC2所对应的L2-SW2也是同理，我这里就不过多赘述了（唯一需要注意的就是网关别配错，我这里PC2所对应的网关是<strong>192.168.20.250</strong>，别弄成254了）</p>
<p class="align-left"><span style="color: #e03e2d;">Step5：</span>设置在L3-AR1上配置基础信息以及OSPF路由</p>
<p class="align-left">以下是用于设置各个端口的IP的指令（进入端口配IP就行，没啥难度的）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-013328.png" alt="" width="1257" height="346" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013328-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013328-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013328-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013328-xl.webp 1024w"></figure>
<p class="align-left">在L3-AR1上创建OSPF路由（就是加入临近的网段），如下图所示</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-013705.png" alt="" width="1233" height="194" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013705-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013705-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013705-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-013705-xl.webp 1024w"></figure>
<p class="align-left">如果OSPF忘记了的朋友，可以去看看我的上一篇文章里面有讲，这里我就不过多赘述了</p>
<p class="align-left">配置完成后再次回到L3-SW1/2中，我们需要在这<strong>两个设备</strong>中添加OSPF路由，从而实现全网互通</p>
<p class="align-left">这是我在L3-SW1配置的操作，如下图所示：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-014426.png" alt="" width="1257" height="291" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-014426-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-014426-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-014426-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-014426-xl.webp 1024w"></figure>
<p class="align-left">分别对应的是：</p>
<ul class="align-center" style="list-style-type: circle;">
<li class="align-left">192.168.10.0的网段 + 反掩码</li>
<li class="align-left">192.168.20.0的网段 + 反掩码</li>
<li class="align-left">10.0.0.0的网段 + 反掩码</li>
</ul>
<p class="align-left"><code>*注：</code>L3-SW2也需要操作，切记不可以忘记！！！</p>
<p class="align-left">这里我们依旧使用PC3去PingPC1测试，可以看到即使不在同一个网段也能Ping通，即为成功</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-13-015100.png" alt="" width="2466" height="1363" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-015100-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-015100-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-015100-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-13-015100-xl.webp 1024w"></figure>
<p class="align-center"><strong>至此，恭喜你已经实现基础的全网通</strong></p>
<h4 class="align-center">实验二：冗余网关协议（聚合链路&amp;VRRP）</h4>
<p class="align-left">在原有的基础之上，我们将继续操作（<code>*注：</code>以下的Ping实验验证时，可能会存在短时间Ping不通的情况，那是涉及到ENSP模拟器的性能，及这个网络协商的时间差）我会给L3-SW1与L3-SW2之间配聚合链路</p>
<div class="align-center" data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<h5>聚合链路配置</h5>
<p class="align-left">功能概述：是一种将<strong>多个物理链路捆绑成一个逻辑链路</strong>的技术，核心作用是<strong>提升带宽、增加链路冗余</strong></p>
<div class="align-left"> </div>
</div>
<div class="align-center" data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div class="old-record-id-DRTQd6vXDocyUYxUmgVc0WqYnDb align-left"><span style="color: #e03e2d;">Step1</span>：首先进入L3-SW1上，创建一个聚合接口为Eth-Trunk2，并且设置聚合口中最大的活动数为2，最后将物理端口加入到当前聚合口中</div>
<div class="align-center"> </div>
<div class="align-left">下图为我在L3-SW1上的演示：（L3-SW2也是同理）</div>
<div class="align-center"> </div>
<div class="align-center"><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-19-203418.png" alt="" width="1026" height="190" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-203418-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-203418-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-203418-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-203418-xl.webp 1024w"></figure></div>
<div class="align-center"> </div>
<div class="align-left">创建聚合链路Eth-Trunk2如下：</div>
<div class="align-center">
<pre class="language-cpp line-numbers"><code>[L3-SW1]int Eth-Trunk 2
//创建名为 Eth-Trunk 2 的隧道
[L3-SW1-Eth-Trunk2]port link-type trunk
//设置端口类型为Trunk模式
[L3-SW1-Eth-Trunk2]port trunk allow-pass vlan 2 to 4094
//放行所有端口</code></pre>
</div>
<div class="align-left">在刚刚创建好的Eth-Trunk2链路中加入两个端口，如下所示：</div>
<div class="align-center">
<pre class="language-cpp line-numbers"><code>[L3-SW2]int Eth-Trunk 2
//进入 Eth-Trunk 2 端口
[L3-SW2-Eth-Trunk2]trunkport GigabitEthernet 0/0/23 to 0/0/24
//将之前配置的信息应用到 g0/0/23和24口</code></pre>
</div>
<div class="align-center"><strong>至此，聚合链路部分就已经成功配置完毕了</strong></div>
<h5 class="align-center">VRRP配置</h5>
<p class="align-left">功能概述：它是一种用于<strong>网关冗余备份</strong>的网络协议，核心作用是让多台设备（通常是交换机 / 路由器）共享同一个 “虚拟网关 IP”，避免单点故障导致终端无法上网</p>
<div class="align-center" data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div class="align-left"> </div>
<div class=" old-record-id-BFA8dNtpPo2UzYxFQY2czjoNn7d align-left"><span style="color: #e03e2d;">Step1</span>：首先创建 vlan 10 和 vlan 20 的虚拟地址（我这里将vlan 10/20 的设置为192.168.10/20.251）</div>
<div class="align-left"> </div>
<div class=" old-record-id-BFA8dNtpPo2UzYxFQY2czjoNn7d align-left"><span style="color: #e03e2d;">Step2</span>：设置监控上行链路为g0/0/22端口，我将设置 L3-SW1 作为 vlan 10 的 Master 设备（所以需要对vlan 10 的vrrp组设置优先级为 120 ，设置链路抢占时间为 20 秒）</div>
<div> </div>
<div class="align-left">配置如下（我在L3-SW1演示的截图）：</div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-19-213114.png" alt="" width="1133" height="230" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-213114-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-213114-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-213114-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-213114-xl.webp 1024w"></figure></div>
<div> </div>
<div class=" old-record-id-BFA8dNtpPo2UzYxFQY2czjoNn7d align-left">逐行代码解释如下：</div>
<div>
<pre class="language-cpp line-numbers"><code>[L3-SW1]int vlan10
//进入 vlan10
[L3-SW1-Vlanif10]vrrp vrid 10 virtual-ip 192.168.10.251
//设置一个虚拟id为10的vrrp vrid，并划分虚拟ip为192.168.10.251
[L3-SW1-Vlanif10]vrrp vrid 10 priority 120
//设置这个vlan10下的虚拟id的优先级为120
[L3-SW1-Vlanif10]vrrp vrid 10 preempt-mode timer delay 20
//设置vlan10的虚拟id链路抢占时间为20秒
[L3-SW1-Vlanif10]vrrp vrid 10 track interface GigabitEthernet0/0/22
//让vrrp 10的配置应用在L3-SW1的g0/0/22的端口
[L3-SW1-Vlanif10]int vlan20
//进入vlan20
[L3-SW1-Vlanif20]vrrp vrid 20 virtual-ip 192.168.20.251
//配置vlan20的vrrp的虚拟id</code></pre>
</div>
</div>
<p class="align-left">此外在L3-SW2上也亦是如此：</p>
<pre class="language-cpp line-numbers"><code>[L3-SW2]interface vlan10
[L3-SW2-Vlanif10] vrrp vrid 10 virtual-ip 192.168.10.251
//以上用于在这个L3-SW2上去宣告vlan10下的的虚拟id

[L3-SW2-Vlanif10]int vlan20
[L3-SW2-Vlanif20]vrrp vrid 20 virtual-ip 192.168.20.251
//以上用于去设置一个虚拟id为20的vrrp vrid，并划分虚拟ip为192.168.20.251

[L3-SW2-Vlanif20]vrrp vrid 20 priority 120
//设置这个vlan20下的虚拟id的优先级为120
[L3-SW2-Vlanif20] vrrp vrid 20 preempt-mode timer delay 20
//设置vlan20下的虚拟id链路抢占时间为20秒
[L3-SW2-Vlanif20] vrrp vrid 20 track interface GigabitEthernet0/0/22
//让vrrp 20的配置应用在L3-SW2的g0/0/22端口</code></pre>
<p class="align-left"> L3-SW2的配置图片如下：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-19-214540.png" alt="" width="1120" height="300" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-214540-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-214540-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-214540-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-214540-xl.webp 1024w"></figure>
<p class="align-left"><code>*常见问题</code>：如果我已经配了不同的的优先级（也就是输入了在L3-SW1和L3-SW2不同的vrrp vrid 10 priority 120/100）还是显示都为Master，怎么解决？（如下图所示）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-20-012320.png" alt="" width="1110" height="231" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-012320-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-012320-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-012320-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-012320-xl.webp 1024w"></figure>
<div class="align-left" data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div class="align-center">上图的这个vlan20理应是Backup，而不是Master（此处为错误示范）</div>
<div class="align-center"><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Xiang-Tong-vlan20De-ipDi-Zhi.png" alt="" width="2388" height="1431" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Xiang-Tong-vlan20De-ipDi-Zhi-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Xiang-Tong-vlan20De-ipDi-Zhi-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Xiang-Tong-vlan20De-ipDi-Zhi-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Xiang-Tong-vlan20De-ipDi-Zhi-xl.webp 1024w"></figure></div>
<div class="align-left">这个很显然就是L3-SW1或L3-SW2的vlan10/20的IP地址最后一位冲突了，只需要进入对应的vlan，修改vlan的ip就可以解决</div>
<h5>需要注意的是这里的L3-SW1和L3-SW2上的vlan20下的ip不能和同网段的ip一样，否则大概率失败</h5>
<div class="align-left"> </div>
<div class="align-left">操作如下（比如我这里就是L3-SW1上的vlan20的ip配错了，不小心配成和L3-SW2一样的ip了）：</div>
<div class="align-center">
<pre class="language-cpp line-numbers"><code>&lt;L3-SW1&gt;sys
//进入系统试图
[L3-SW1]int vlan20
//进入vlan20

[L3-SW1-Vlanif20]dis this
#
interface Vlanif20
 ip address 192.168.20.253 255.255.255.0
 vrrp vrid 20 virtual-ip 192.168.20.251
#
return
//查看这个端口的情况，发现错误地方

[L3-SW1-Vlanif20]undo ip address 192.168.20.253 24
//删除错误ip，使用undo + 需要删除的指令

[L3-SW1-Vlanif20]ip address 192.168.20.254 24
//添加新的ip</code></pre>
<p>修改后即可恢复正常状态（如下图所示）：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-20-014347.png" alt="" width="1106" height="236" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014347-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014347-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014347-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014347-xl.webp 1024w"></figure>
</div>
<div class="align-left align-center"> </div>
<div class="old-record-id-SEXrdattxoG9eJxTXq4cOjarnSg align-left"><span style="color: #e03e2d;">Step3</span>：设置完成VRRP之后，需要将全部网络进行联通，所以需要在三层设备上配置OSPF路由，首先进行路由器ID设置，设置路由器的ID信息如下</div>
<div class="align-center">
<div data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="true">
<div>
<table class="ace-table" style="width: 100%; height: 194.25px;" data-ace-table-col-widths="332;488"><colgroup><col style="width: 47.2934%;" width="332"><col style="width: 69.5157%;" width="488"></colgroup>
<tbody>
<tr style="height: 48.5625px;">
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-K1mtdbXOQoytwFxwGYEcJYzRn0c"><strong>设备</strong></div>
</td>
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-KAFsdTWISoyrBixWYhicmHwinQh"><strong>ID</strong></div>
</td>
</tr>
<tr style="height: 48.5625px;">
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-Mu1mdMKjfo89YuxsN1McM5qkn8g">L3-AR1</div>
</td>
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-XAGMdPpWJoW4ujxY6H9ccwqAncf">1.1.1.1</div>
</td>
</tr>
<tr style="height: 48.5625px;">
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-GRi9d3h3yoLpTCxTKtwck0CSnSb">L3-SW1</div>
</td>
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-WxMtdPP7poeO0Dx4B4kc7ZhgnOh">2.2.2.2</div>
</td>
</tr>
<tr style="height: 48.5625px;">
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-UQYDdnhDHotgg1xtjbgchAdCnpd">L3-SW2</div>
</td>
<td class="align-center" style="height: 48.5625px;" colspan="1" rowspan="1">
<div class="ace-line ace-line old-record-id-Jgu6dmOWPoGLekxwMskcuGtPnYf">3.3.3.3</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div>配置命令如下（这里我以L3-SW1演示）：</div>
<div class="align-center"><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-19-220218.png" alt="" width="785" height="163" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-220218-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-220218-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-220218-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-19-220218-xl.webp 1024w"></figure></div>
<pre class="language-cpp line-numbers"><code>[L3-SW1]router id 2.2.2.2
//修改router id</code></pre>
<p class="align-left">至于在L3-AR1，L3-SW1与L3-SW2之间的OSPF部分，我已经在前面的部分说过了，这里我就不在过多赘述了（前面配过的可以跳过此步骤，没配的记得配一下）</p>
<h5 class="align-left align-center">验证环节</h5>
<p>这里我使用wireshark抓包工具向你直观的展示VRRP的“起死回生”环节</p>
<p class="align-left">我们首先使用PC1去一直Ping PC3（我使用的是ping + ip地址 + ”-t“命令）来保持PC1一直往PC3发送<a href="https://baike.baidu.com/item/ICMP/572452" target="_blank" rel="noopener noreferrer">ICMP</a>的报文</p>
<p class="align-left">可以看到这里的PC1走的是GE0/0/2口（图中展示了GE0/0/2抓到了来自PC1与PC3之间通讯的ICMP报文，而这个GE0/0/1口则没有，只是普通的VRRP和OSPF的<a href="https://blog.csdn.net/x13262608581/article/details/134025835" target="_blank" rel="noopener noreferrer">多播协议</a>）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Zhua-Bao-GE02Kou-You-Shu-Ju.png" alt="" width="2450" height="1413" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Zhua-Bao-GE02Kou-You-Shu-Ju-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Zhua-Bao-GE02Kou-You-Shu-Ju-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Zhua-Bao-GE02Kou-You-Shu-Ju-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Zhua-Bao-GE02Kou-You-Shu-Ju-xl.webp 1024w"></figure>
<p class="align-left">接下来，我将这个PC1与PC3通讯的L3-SW2机器给它物理关掉，那么则会发生下图的的情况（由于本人的电脑性能不佳，等待了较长的时间）最终成功等待到了这个L3-SW1的再次通讯</p>
<p class="align-left">可以看到我在下图的这个GE0/0/1口，成功捕捉到了来自于这个VRRP协议再次拉起的PC1于PC3的ICMP的通讯信息的数据包</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-20-014945.png" alt="" width="2400" height="1543" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014945-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014945-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014945-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-014945-xl.webp 1024w"></figure>
<p>从以上的实验可简单说明这个VRRP冗余网关协议的作用</p>
<p class="align-center"><strong>至此，VRRP配置的部分就已经成功配置完毕了</strong></p>
<h4 class="align-center">实验三：生成树协议STP&amp;MSTP</h4>
<p class="align-left">在学习这个概念之前，我们需要先简单的了解有关于以下这几个问题的产生原理，才能理解这STP协议和MSTP协议的本质</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-21-093943.png" alt="" width="2199" height="1106" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-093943-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-093943-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-093943-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-093943-xl.webp 1024w"></figure>
<blockquote>
<h5 class="align-left"> Q：网络环路的产生&amp;什么是网络环路？</h5>
<p class="align-left"><strong>A：</strong>网络设备之间物理意义上的形成环形连接，简单来说就是网络设备之间不存在树状结构的网络拓扑，而全是按照环形拓扑所连接的，那这个我们就称之为网络环路（如上图所示<strong>左侧所示为树状结构，右侧为环形结构</strong>）</p>
<h5 class="align-left"> Q：环形网络会导致什么问题？</h5>
<p class="align-left"><strong>A：</strong>网络环路会导致<strong>广播风暴</strong>和交换机的<strong>帧交换表震荡</strong></p>
<h5 class="align-left">Q：什么是生成树协议？</h5>
<p class="align-left"><strong>A：</strong>以太网交换机使用生成树协议STP（Spanning Tree Protocol），可以在<strong>提高网络可靠性的同时又避免环路带来的各种问题</strong></p>
<h5 class="align-left"><strong>Q：什么是生成树算法？</strong></h5>
<p class="align-left"><strong>A：</strong>那顾名思义，前面我们知道了环路没有树形结构，那么这个生成树算法就可以简单理解成<strong>在这个环路的网络中创建一个树形拓扑</strong>，既可以利用环路的备用优势，还可以避免环路的劣势问题</p>
<h5 class="align-left">Q：生成树算法的定义及目标</h5>
<p class="align-left"><strong>A：</strong>生成树算法STA（Spanning Tree Algorithm）是生成树协议STP（Spanning Tree Protocol）的核心。而它的实现目标是：<strong>在包含有物理环路的网络中，构建出一个能够连通全网各节点的树型无环逻辑拓扑</strong></p>
</blockquote>
<p class="align-left align-center"><strong>接下来我来为你展示STP是怎么工作的</strong></p>
<p class="align-left">首先我们线看到下图，这张图表示着有3台PC（分别为命名为H1&amp;2&amp;3），在每台机器的上层都连接着一个交换机，为了保障这3台机器之间能正常通讯，我们会把这3个交换机的连接设置成环路（目的是为了利用环路的优势去创建备用链路），而这个STP协议就是为了防止环路的产生而设置的（而这个STP协议则会在保证线路通畅的同时，暂时阻塞一个用不着的端口，从而实现防止环路的形成）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-20-171138.png" alt="" width="1245" height="648" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171138-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171138-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171138-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171138-xl.webp 1024w"></figure>
<p class="align-left">如上图所示，我们在3台交换机上设置了STP生成树协议，可以看出STP协议的工作原理是把交换机C上的一个接口调整成暂时阻塞的状态，来实现保证网络拓扑的树状结构的</p>
<p class="align-left">如下图所示，我们的交换机A的一个端口出现了故障，那么这个STP协议就会立即打开原本阻塞的端口<strong>顶替已经故障的线路</strong>，实现内网的正常通讯</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-20-171214.png" alt="" width="1264" height="660" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171214-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171214-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171214-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-20-171214-xl.webp 1024w"></figure>
<p class="align-left align-center"> <strong>以上就是STP协议的的简单理解</strong></p>
<p class="align-left">生成树算法的三个步骤：</p>
<ol>
<li class="align-left">“选举”根交换机</li>
<li class="align-left">“选举”根端口</li>
<li class="align-left">“选举”指定端口并阻塞备用端口</li>
</ol>
<p class="align-left">现在我们在之前的那个拓扑里再次添加几个路由器，和一台“傻瓜”交换机（这里的傻瓜不是字面意思，指的是这个交换机不做配置，只是默认当成路由器的集线器使用）组成一个新的网段，并设置成VRRP来实验</p>
<p>由于前面我说过这个VRRP的配置过程了，那我这里只作简要说明了</p>
<p class="align-left">（1）：给L3-AR1添加网口，用于拓展连接（记住，这里新添加的接口是GE4/0/*了，别ip配错了）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-21-151107.png" alt="" width="2033" height="1229" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-151107-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-151107-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-151107-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-151107-xl.webp 1024w"></figure>
<p class="align-left">（2）：添加&amp;配置新的路由，拓扑如下（改名，配端口ip等基础操作）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-21-155210.png" alt="" width="2406" height="1397" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-155210-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-155210-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-155210-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-155210-xl.webp 1024w"></figure>
<p class="align-left"><code>*注意点</code>：（重要核对排查信息点已使用方框括起来了）</p>
<p class="align-left">（1）L3-AR1的OSPF要添加一条来自于10.3.3.0网段的记录</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/l3-ar1-area0-ospf.png" alt="" width="620" height="410" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1-area0-ospf-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1-area0-ospf-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1-area0-ospf-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1-area0-ospf-xl.webp 1024w"></figure>
<p class="align-left">（2）新添加的L3-AR2/AR3都要添加OSPF（网段来自10段和172段的）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-21-161257-2.png" alt="" width="1387" height="393" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-161257-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-161257-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-161257-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-161257-2-xl.webp 1024w"></figure>
<p class="align-left">（3）新添加的这个L3-AR2/3对应的router id分别为4.4.4.4和5.5.5.5（1~3已经被前面的L3-SW1/2&amp;L3-AR1占用了）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/l3-ar1andar2routerid.png" alt="" width="1759" height="363" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1andar2routerid-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1andar2routerid-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1andar2routerid-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar1andar2routerid-xl.webp 1024w"></figure>
<p class="align-left">（4）VRRP设置的时候需要将L3-AR2设置成Master节点，(即这个端口的优先级设置为120）L3-AR3则不需要设置优先级，但是vrrp virtual-ip必须要两个都配置（还需注意vrid的分组）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/l3-ar2-vrrp-pr-120.png" alt="" width="826" height="374" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-pr-120-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-pr-120-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-pr-120-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-pr-120-xl.webp 1024w"></figure>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/l3-ar2-vrrp-vid.png" alt="" width="822" height="372" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-vid-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-vid-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-vid-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/l3-ar2-vrrp-vid-xl.webp 1024w"></figure>
<p class="align-left">（5）PC3的网关改成VRRP的虚拟ip，这个直接配在L3-AR2/3的GE0/0/2口就行（PC3的地址我配置的默认是172.16.100.1）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-21-162624-2.png" alt="" width="1544" height="1048" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-162624-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-162624-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-162624-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-21-162624-2-xl.webp 1024w"></figure>
<p class="align-left">（6）L2-SW3可以不用做任何的设置，直接当成“傻瓜”交换机就行</p>
<p class="align-left">（7）测试是否全网通（我这里使用PC3去Ping pc1&amp;pc2去测试网路连通性）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/pc3pingpc1andpc2.png" alt="" width="1542" height="1051" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/pc3pingpc1andpc2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/pc3pingpc1andpc2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/pc3pingpc1andpc2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/pc3pingpc1andpc2-xl.webp 1024w"></figure>
<p><strong>可以看到能成功相互通讯，那么即代表成功</strong></p>
<p class="align-left">在掌握了STP的一些基础的概念之后，那么MSTP和STP就很好区分了</p>
<p> </p>
<strong>MSTP 的域概念：</strong>
<div class="container-Uxvbjy md-box-line-break wrapper-GYqxgQ undefined"><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">MSTP 引入了</span><strong style="font-family: var(--editor-font-family); font-size: inherit;">MST域（MST Region）</strong><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);"> 的概念，同一域内的交换机必须配置相同的</span><strong style="font-family: var(--editor-font-family); font-size: inherit;">域名、修订级别和vlan的实例映射关系</strong><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">，否则会被视为不同的域，按<strong>RSTP</strong>的方式处理（RSTP就是STP的快速版本，而MSTP则是在RSTP基础上扩展了多实例功能，因此 MSTP同时具备<strong>“快速收敛”</strong>和<strong>“多 VLAN 灵活控制”</strong>的优势）</span></div>
<div>
<p><strong>MSTP的核心作用：为不同 VLAN 映射的实例指定根桥，实现流量按需转发</strong></p>
</div>
<div> </div>
<div><strong>MSTP相关的实验：</strong></div>
<div> </div>
<div><strong>步骤一：</strong>先进入L3-SW1和L3-SW2的这俩个交换机，配置状态为MSTP</div>
<div><span style="text-align: left; color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">首先在四台交换机上配置MSTP的区域（需要四台设备的参数完全一致，我这里仅在L3-SW1演示）</span></div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-27-215607.png" alt="" width="1292" height="202" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-27-215607-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-27-215607-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-27-215607-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-27-215607-xl.webp 1024w"></figure></div>
</div>
<div class="align-left" data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<p>然后在L3-SW1和L3-SW2上输入以下的指令</p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]stp region-configuration
//进入MSTP域的配置视图
[L3-SW1-mst-region]region-name huawei
//设置MSTP域名为 huawei（同域设备域名需一致）
[L3-SW1-mst-region]instance 1 vlan 10
//将vlan10映射到生成树实例 1
[L3-SW1-mst-region]instance 2 vlan 20
//将vlan20映射到生成树实例 2
[L3-SW1-mst-region]active region-configuration 
//激活上述MSTP域配置，使其生效</code></pre>
<p><strong>核心作用</strong>：让vlan10/20分别按实例 1、2 独立计算生成树，实现不同vlan的流量负载分担</p>
<p>输入stp region-configuration进入配置界面，使用display this来查看当前配置是否生效，以及复制以下内容，后续有用</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-28-004530-2.png" alt="" width="1244" height="310" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-004530-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-004530-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-004530-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-004530-2-xl.webp 1024w"></figure>
<p><strong>步骤二：</strong><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">继续在L3-SW1上和L3-SW2上进行根节点的配置，因为在VRRP中配置了vlan10的Master节点为L3-SW1所以，在配置的时候，将生成树的1区域，在SW1上设置为根节点，将2号区域设置为非根节点</span></p>
<pre class="language-cpp line-numbers"><code>[L3-SW1]stp instance 1 root primary
//设置本交换机为MSTP实例 1 的主根桥（优先级最高）
[L3-SW1]stp instance 2 root secondary
//设置本交换机为MSTP实例 2 的备根桥（优先级次高），主根桥故障时它接替成为实例 2 的根桥</code></pre>
<p>下图为L3-SW1的配置（注意root的顺序，1为主要，2为次要）</p>
<h5><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-28-010219.png" alt="" width="802" height="197" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010219-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010219-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010219-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010219-xl.webp 1024w"></figure></h5>
<p><code>*细节注意：</code>在L3-SW1上是这样配的，一旦到了L3-SW2可就不是这样了（如下所示，要和L3-SW1对称配）</p>
<pre class="language-cpp line-numbers"><code>[L3-SW2]stp instance 1 root secondary
//设置 1 号区域为非根节点
[L3-SW2]stp instance 2 root primary
//设置 2 号区域为根节点</code></pre>
<p>下图为L3-SW2的配置（注意root的顺序，2为主要，1为次要）</p>
<h5><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-28-010503.png" alt="" width="785" height="198" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010503-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010503-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010503-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-010503-xl.webp 1024w"></figure></h5>
<p><strong>检查配置环节</strong></p>
<p>（1）使用这个PC1去PingPC3，可以Ping通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/pc1pingpc3_mstp.png" alt="" width="1540" height="1041" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/pc1pingpc3_mstp-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/pc1pingpc3_mstp-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/pc1pingpc3_mstp-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/pc1pingpc3_mstp-xl.webp 1024w"></figure>
<p>（2）查看L3-SW1的stp设置情况，可以看到各个端口都是打开的状态，意味着L3-S我处于根桥，如下图所示</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-28-020020-2.png" alt="" width="1287" height="430" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-020020-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-020020-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-020020-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-020020-2-xl.webp 1024w"></figure>
<p>（3）L2-SW1上，查看一下stp的情况，也是可以发现之前设置，也是可以实现PC1的流量走L3-SW1</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-28-021559.png" alt="" width="1273" height="252" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-021559-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-021559-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-021559-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-021559-xl.webp 1024w"></figure>
<p>L3-SW2的配置如下</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/35/Ping-Mu-Jie-Tu-2025-12-28-022422.png" alt="" width="1280" height="255" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-022422-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-022422-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-022422-md.webp 768w ,https://zeyun.dpdns.org/media/posts/35/responsive/Ping-Mu-Jie-Tu-2025-12-28-022422-xl.webp 1024w"></figure>
<p>可以看到，这俩个PC都是默认走G0/0/1的上去，而不是GE0/0/2的备用线路</p>
<p class="align-right"><strong>本次内容到此结束，感谢您的观看，谢谢ԅ(¯﹃¯ԅ)</strong></p>
<p class="align-right">此外，Part4 已经更新：<a href="https://zeyun.dpdns.org/network_with_huawei_ensp_part4.html">点我跳转</a></p>
</div>
</div>
            ]]>
        </content>
    </entry>
    <entry>
        <title>网络设备配置实战分析 Part 2</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/network_with_huawei_ensp_part2.html"/>
        <id>https://zeyun.dpdns.org/network_with_huawei_ensp_part2.html</id>
            <category term="网络设备配置技术学习笔记"/>

        <updated>2025-12-06T16:45:00+08:00</updated>
            <summary>
                <![CDATA[
                    本项目基于华为的ENSP模拟器实现 我在这里会更加侧重于实践的步骤，至于部分的理论知识，请参考互联网或者Ai 本章的主要讲解的内容如下 拓扑下载：点我下载 ，密码：8hc8 本项目的拓扑如下图所示（可以看到，图片中划分了很多的网段，还有很多路由，不用慌，我会一步一步的来）&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <ul style="list-style-type: square;">
<li>本项目基于华为的ENSP模拟器实现</li>
<li>我在这里会更加侧重于实践的步骤，至于部分的理论知识，请参考互联网或者Ai</li>
</ul>
<blockquote>
<p>本章的主要讲解的内容如下</p>
<ol style="list-style-type: upper-roman;">
<li>网关的配置</li>
<li>Rip路由&amp;Rip的对端的简单加密</li>
<li>DHCP服务</li>
<li>OSPF路由</li>
<li>Rip路由与OSPF的结合</li>
</ol>
</blockquote>
<p>拓扑下载：<a href="https://wwbte.lanzn.com/b014wwaaja" target="_blank" rel="noopener noreferrer">点我下载</a> ，密码：8hc8</p>
<p>本项目的拓扑如下图所示（可以看到，图片中划分了很多的网段，还有很多路由，不用慌，我会一步一步的来）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-015236.png" alt="" width="1924" height="1242" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-015236-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-015236-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-015236-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-015236-xl.webp 1024w"></figure>
<p>开始之前，可以输入sys（等同于system-view，为了方便，以下我将会使用sys这个简化后的指令来操作），进入特权模式（就是[huawei]的这个）输入以下指令，从而关闭烦人的操作日志：</p>
<pre class="language-c line-numbers"><code>undo info-center enable </code></pre>
<p>出现以下提示则关闭成功：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-162219.png" alt="" width="696" height="90" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162219-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162219-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162219-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162219-xl.webp 1024w"></figure>
<p>另外，可以输入以下命令给设备命名，方便管理和以防混淆</p>
<pre class="language-apacheconf line-numbers"><code>sys + 你设备的名称</code></pre>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-162524.png" alt="" width="315" height="33" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162524-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162524-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162524-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162524-xl.webp 1024w"></figure>
<p>上图为我给路由器1，命名为AR1的截图</p>
<p>此外，退出特权模式（就是[huawei]的这个），进入用户模式下（就是&lt;huuawei&gt;的这个），输入save，再按照提示输入y，可以随时保存（此操作强烈建议经常做，如遇到ensp模拟器死机的时候，重启设备的时候，保存前的信息不会丢）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-162855.png" alt="" width="1247" height="207" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162855-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162855-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162855-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-162855-xl.webp 1024w"></figure>
<p><strong>以上的操作非必须，但是建议这样做</strong></p>
<h5>I.项目1：给每个网段，配对应的网关</h5>
<p>核心思路：该网关的IP其实就是上层与他连接的路由的IP</p>
<p>例如：我需要给PC1配网关的IP，那么我需要先进入上层的AR1与PC1连接的GE0/0/0口配IP，而这个IP就是PC1的网关IP</p>
<p>代码如下：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-161832.png" alt="" width="901" height="250" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-161832-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-161832-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-161832-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-161832-xl.webp 1024w"></figure>
<pre class="language-apacheconf line-numbers"><code>ip address + IP地址 + 子网掩码（255.255.255.0或24都行）</code></pre>
<p>然后再进入PC1，给他配上网关和对应的IP，记得点击右下角的“应用”才会生效</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-164111.png" alt="" width="1940" height="656" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164111-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164111-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164111-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164111-xl.webp 1024w"></figure>
<p>去在PC1上Ping自己的网关，可以看到能有结果，即可成功（这一步很关键，很多后续的实验未能成功，很有可能就是卡在了这一步）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-164249.png" alt="" width="1520" height="779" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164249-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164249-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164249-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-164249-xl.webp 1024w"></figure>
<p>其他的设备也是如此(基本上连接路由器的PC机)都需要配置这个网关的（当然这也仅限于手动配IP的机器，DHCP自动分发IP的则不用在PC上手动配置网关）</p>
<h5>II.项目2：Rip路由</h5>
<p>（1）首先先配合拓扑图，给对应的网段配网</p>
<p>我这里以我截选的这个来去分析</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-170824.png" alt="" width="965" height="142" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-170824-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-170824-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-170824-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-170824-xl.webp 1024w"></figure>
<p>可以看到，我这里截图的是路由器，俩俩之间的网段的网络配置。需要进入所对应的端口来进行配置</p>
<p>比如我这里的最左边的这台路由，我就需要进入GE0/0/1口，去配置对应的IP地址，即为12.1.1.1/24（注意：这里的12.1.1.0是网段，不可俩边都配12.1.1.0/24）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-171805.png" alt="" width="874" height="133" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171805-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171805-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171805-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171805-xl.webp 1024w"></figure>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-171819.png" alt="" width="804" height="85" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171819-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171819-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171819-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-171819-xl.webp 1024w"></figure>
<p>配置完成后，即可尝试着Ping试一下</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-172125.png" alt="" width="1151" height="441" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172125-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172125-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172125-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172125-xl.webp 1024w"></figure>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-172035.png" alt="" width="1123" height="430" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172035-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172035-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172035-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-172035-xl.webp 1024w"></figure>
<p>可以看到，能够相互通讯，成功！</p>
<p>以上演示的是AR1和AR2的配置（同样的AR2和AR3，AR3和AR4，AR5和AR6...）也都需要这样的配置</p>
<div data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div> </div>
<div class=" old-record-id-NJ2IdVuK0oCsYDxzCEEcET0wnFf">在三个路由器上启用RIP路由，并且设置版本为2</div>
<div> </div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-214715.png" alt="" width="794" height="688" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-214715-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-214715-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-214715-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-214715-xl.webp 1024w"></figure></div>
<div>
<p>可以看到，这个AR1的路由涉及了两个网段（192.168.1.0/24和12.1.1.0/24）</p>
<p>（2）那么就需要创建RIP路由，去关联这两个网段</p>
<p>例如我们的这个拓扑图，就有12.1.1.0和192.168.1.0的</p>
<p>语法如下：</p>
<pre class="language-c line-numbers"><code>rip 1
//创建一个rip路由
version 2
//版本设置为2
network 192.168.1.0
network 12.0.0.0
//宣告网段</code></pre>
</div>
</div>
<p><code>*注</code>：这里RIP版本的原因，使用的是有类别路由协议，它的路由更新报文里不带子网掩码，只能按主类网络来发布路由信息，所以配置时得用12.0.0.0而非12.1.1.0，但效果都一样</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-220741.png" alt="" width="858" height="312" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220741-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220741-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220741-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220741-xl.webp 1024w"></figure>
<p>可以看到我在两边都添加了rip的网段，并且可以Ping通这个路由器的端口IP</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-220950.png" alt="" width="1070" height="497" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220950-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220950-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220950-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-220950-xl.webp 1024w"></figure>
<p>同理可得，在AR2，AR3....上也是如此，输入两个相邻的网段的IP，即可</p>
<p>最终结果，实现全网互通（这里我用的是PC3去Ping的PC1来进行验证）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-221243.png" alt="" width="2225" height="1169" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-221243-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-221243-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-221243-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-221243-xl.webp 1024w"></figure>
<h5>Rip的对端简单加密：</h5>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-231938.png" alt="" width="611" height="202" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-231938-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-231938-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-231938-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-231938-xl.webp 1024w"></figure>
<p>这里演示AR2和AR3的GE0/0/2和GE0/0/2口的端口加密</p>
<p>首先进入AR2的g0/0/2端口，代码示例如下：</p>
<pre class="language-c line-numbers"><code>[AR2]int g0/0/2  //进入AR4的接口
[AR2-GigabitEthernet0/0/2]rip authentication-mode simple cipher 123456  
//配置简单认证，密码123456（密文存储）</code></pre>
<p>可以看到，这里我添加的密码已经转换成密文</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-232826.png" alt="" width="1197" height="298" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-232826-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-232826-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-232826-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-232826-xl.webp 1024w"></figure>
<p>看到这，则说明这个AR2的g0/0/2端口已经加密了</p>
<p>我们来使用PC4去Ping PC1验证一下：</p>
<p>我设置了AR2的g0/0/2口的这个Rip密码，但是AR3的g0/0/2没设置，现在我用这个PC4pingPC1，并在AR2和AR3的这两个g0/0/2口抓的包</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-233555.png" alt="" width="2879" height="1696" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-233555-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-233555-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-233555-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-233555-xl.webp 1024w"></figure>
<p>可以看到并没有Ping成功，代表着被Rip的密码给拦截了</p>
<p>当给AR3的g0/0/2口添加后这个Rip密码后，则可看到来自PC4的成功Ping请求</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-234458.png" alt="" width="1882" height="476" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-234458-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-234458-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-234458-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-234458-xl.webp 1024w"></figure>
<h5>III.项目3：DHCP拓展模块</h5>
<p>我们在此基础之上，给PC4创建一个DHCP服务，使得其可以自行获取IP地址</p>
<p>首先先进入AR4，去配置DHCP服务</p>
<p>输入以下代码：</p>
<pre class="language-c line-numbers"><code>[AR4]ip pool pc4pool  //创建地址池，命名为pc4pool
[AR4-ip-pool-pc4pool]network 192.168.6.0 mask 255.255.255.0  //配置地址池网段
[AR4-ip-pool-pc4pool]gateway-list 192.168.6.1  //配置网关（即AR4的GE 0/0/1接口IP）</code></pre>
<p>回到PC4，打开DHCP选项</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-225006.png" alt="" width="1153" height="343" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-225006-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-225006-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-225006-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-225006-xl.webp 1024w"></figure>
<p>在终端中输入：<code>ipconfig /renew</code>来查看这个更新的信息</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-230419.png" alt="" width="1121" height="471" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230419-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230419-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230419-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230419-xl.webp 1024w"></figure>
<p>可以看到，已经获取到了IP地址</p>
<p>尝试Ping一下PC1的IP，当然也可以Ping通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-06-230630.png" alt="" width="1777" height="1021" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230630-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230630-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230630-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-06-230630-xl.webp 1024w"></figure>
<p>如果Ping不通，有问题，先尝试Ping一下自己网关，然后就是回头看看这个配RIP路由时候的，是不是两两之间的配置有一边network没配上</p>
<h5>IV.项目4：OSPF路由</h5>
<p>在此基础之上，我们现在手动给这个AR2添加上这个拓展模块（此操作会使得AR2断电，一定要先保存！！！）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-000932.png" alt="" width="1240" height="207" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-000932-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-000932-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-000932-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-000932-xl.webp 1024w"></figure>
<p>先进入用户视图&lt;huawei&gt;（也就是特权模式[huawei]下，输入q即可切换用户视图）</p>
<p>输入save，保存当前配置，否则会丢失配置</p>
<p>其次，右击AR2，鼠标点击“设置”，找到下面的“4GEW-T”的拓展模块，放入到这个AR3260里面</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Tian-Jia-4geKou.png" alt="" width="2008" height="1225" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Tian-Jia-4geKou-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Tian-Jia-4geKou-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Tian-Jia-4geKou-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Tian-Jia-4geKou-xl.webp 1024w"></figure>
<p>随后再次点击”启动设备“，将AR2启动起来</p>
<p>从左侧拖入两台AR3260和一台PC机，并使用Copper线连接起来</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-001904.png" alt="" width="2879" height="1703" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-001904-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-001904-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-001904-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-001904-xl.webp 1024w"></figure>
<p>给这个新添加的两个网段（AR2和AR5我设置的是45.1.1.0/24网段，AR5和AR6我设置的56.1.1.0/24网段，AR6和PC5我设置的192.168.20.0/24网段）并且在这个我使用颜色框选的这个区域配置OSPF路由，使得在我所框选的区域内，可以实现设备互通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-003426.png" alt="" width="1694" height="1195" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003426-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003426-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003426-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003426-xl.webp 1024w"></figure>
<p>配置OSPF的步骤如下：</p>
<div data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div class=" old-record-id-Uy71dLcOmoXvAOxuxfBc3AgHnBf">（1）首先进行基础配置，在所有终端上关闭Debug信息和对设备进行重新命名（AR5和AR6都都是如此），此处为在AR5上操作的截图</div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-003143.png" alt="" width="846" height="307" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003143-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003143-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003143-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003143-xl.webp 1024w"></figure></div>
</div>
<div data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div> </div>
<div class=" old-record-id-AhxIdabIBoPSXQxVpHcc7I3PnLc">（2）对所有的路由器接口进行配置IP，并对终端进行地址的配置（此处仅演示了AR5上的截图）</div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-003749.png" alt="" width="716" height="72" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003749-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003749-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003749-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-003749-xl.webp 1024w"></figure></div>
<div> </div>
<div><code>*注</code>：不要忘记了这个AR2与以下设备连接的GE4/0/0端口也需要配端口IP，这个很重要，千万不能忘记和漏掉（通常情况下，我们习惯将上层设备配xx.xx.xx.1，下层配xx.xx.xx.2）</div>
<div> </div>
<div>
<div data-page-id="B6msdqjeYoAmxTxeIVScaVKBnNg" data-lark-html-role="root" data-docx-has-block-data="false">
<div class=" old-record-id-ZdM6dTJJhoxCWXxHtPAcb5D8nnf">（3）分别在<strong>AR2,AR5,AR6</strong>上配置OSPF，分别进行创建OSPF中路由器的ID，然后设置OSPF的区域，以及宣告自身的网络（此处演示了AR6的配置过程）</div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-005322.png" alt="" width="905" height="266" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005322-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005322-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005322-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005322-xl.webp 1024w"></figure></div>
<div><code>*注</code>：不要忘记了这个AR2与以下设备连接的GE4/0/0端口也需要配OSPF，同上！这个很重要，千万不能忘记和漏掉</div>
<div> </div>
</div>
</div>
<div>此处的network网段宣告指的是，与这个路由器所关连的网段，这里是AR6关联的上层的56.1.1.0/24和下层的192.168.20.1/24网段，示意图如下：</div>
<div><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-005725-2.png" alt="" width="516" height="411" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005725-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005725-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005725-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-005725-2-xl.webp 1024w"></figure></div>
</div>
<p>验证配置：（我这里使用PC5和AR6，去PingGE0/0/0口的45.1.1.2，发现可以Ping通，则代表已经实现配置的OSPF的<span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">网络全部连通</span><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">）</span></p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-010132.png" alt="" width="2879" height="1698" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010132-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010132-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010132-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010132-xl.webp 1024w"></figure>
<h5>V.项目5：Rip路由与OSPF的结合</h5>
<p>如果在此基础之上，直接使用PC5去Ping PC1你会发现这根本Ping不通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-010817.png" alt="" width="1041" height="467" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010817-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010817-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010817-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-010817-xl.webp 1024w"></figure>
<p>因为这个刚加入进来的这个OSPF以及它底下的所有设备（AR5,AR6,PC5）都没有与之前配置的Rip联动</p>
<p>可以输入以下指令，实现Rip与OSPF的互通</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-011337.png" alt="" width="520" height="200" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011337-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011337-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011337-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011337-xl.webp 1024w"></figure>
<p>其实原理很简单，先进入Rip 1宣告之前创建的OSPF 1，再进入OSPF 1宣告之前创建的Rip 1就行了</p>
<p>以下是验证OSPF 1的PC5，去Ping跨网段且位于Rip 1的PC1，成功的截图（此外，全网也互通了）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/34/Ping-Mu-Jie-Tu-2025-12-07-011906.png" alt="" width="2356" height="1339" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011906-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011906-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011906-md.webp 768w ,https://zeyun.dpdns.org/media/posts/34/responsive/Ping-Mu-Jie-Tu-2025-12-07-011906-xl.webp 1024w"></figure>
<p class="align-center">那么至此，你已经成功掌握以上的所有内容</p>
<p class="align-center">感谢您的阅读，您的肯定是我更新的最大动力(/≧▽≦)/</p>
<p class="align-center">此外，实战分析 Part 3 已经上线，欢迎访问(‾◡◝)</p>
<p class="align-center"><a href="https://zeyun.dpdns.org/network_with_huawei_ensp_part3.html">点我跳转</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Apple Music 导入音乐</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/import_yourmusic_to_applemusic.html"/>
        <id>https://zeyun.dpdns.org/import_yourmusic_to_applemusic.html</id>
            <category term="Apple Music相关"/>

        <updated>2025-11-27T23:10:55+08:00</updated>
            <summary>
                <![CDATA[
                    1.下载音频格式转换工具 下载 MHAudioConverter 音频工具：点我下载 密码：6npq&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h4>1.下载音频格式转换工具</h4>
<ul style="list-style-type: square;">
<li>下载 <span class="f_tpspan f_tpspannow">MHAudioConverter 音频工具：<a href="https://wwve.lanzn.com/b014wvf02h" target="_blank" rel="noopener noreferrer">点我下载</a></span></li>
<li>密码：6npq</li>
</ul>
<h4>2.应用推荐设置如图（注意文件保存路径）</h4>
<h6>（因此软件不支持中文显示，我这里换成类似的日文做演示）</h6>
<h4><figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/Zhuan-Huan-Cao-Zuo.png" alt="" width="1495" height="879" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Huan-Cao-Zuo-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Huan-Cao-Zuo-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Huan-Cao-Zuo-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Huan-Cao-Zuo-xl.webp 1024w"></figure></h4>
<h4>3.拖入待转换音频文件</h4>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/Ping-Mu-Jie-Tu-2025-11-27-230738.png" alt="" width="988" height="858" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-230738-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-230738-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-230738-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-230738-xl.webp 1024w"></figure>
<p>拖入文件后，会如下图所示</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/Ping-Mu-Jie-Tu-2025-11-27-231300.png" alt="" width="993" height="858" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231300-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231300-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231300-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231300-xl.webp 1024w"></figure>
<h4>4.双击待转换的音频文件</h4>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/Ping-Mu-Jie-Tu-2025-11-27-231328.png" alt="" width="987" height="864" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231328-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231328-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231328-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231328-xl.webp 1024w"></figure>
<p>可以看到完成了格式转换，点击右侧的放大镜，就可打开文件位置</p>
<h4>5.打开iTuns</h4>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/Ping-Mu-Jie-Tu-2025-11-27-231715.png" alt="" width="429" height="539" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231715-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231715-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231715-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/Ping-Mu-Jie-Tu-2025-11-27-231715-xl.webp 1024w"></figure>
<p>点击“最近添加”，将文件拖入</p>
<p>即可看到有一个新的“未知专辑”</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/Zhuan-Ji-Xin-Xi.png" alt="" width="598" height="621" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Ji-Xin-Xi-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Ji-Xin-Xi-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Ji-Xin-Xi-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/Zhuan-Ji-Xin-Xi-xl.webp 1024w"></figure>
<p>之后的歌曲信息等内容自己按需填写就行（歌词导入也是同理，只不过没有滚动效果）</p>
<p>打开手机上的Apple Music也可以看到，成功同步</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/33/shoujijieruapplemusic.PNG" alt="" width="750" height="1294" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/33/responsive/shoujijieruapplemusic-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/33/responsive/shoujijieruapplemusic-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/33/responsive/shoujijieruapplemusic-md.webp 768w ,https://zeyun.dpdns.org/media/posts/33/responsive/shoujijieruapplemusic-xl.webp 1024w"></figure>
<blockquote>
<p>写在最后： </p>
<p>建议单独创一个播放列表，将所有导入的音乐备份一份到这个列表中</p>
<p>我的个人建议是：导入的音乐都下载下来，有时候这个Apple Music服务器，会经常抽风，从而导致自己上传的歌听不了</p>
<p>所以保存一份在本地是一个不错的选择<br><br></p>
</blockquote>
<p class="align-center">The end</p>
<p class="align-center">下一篇见 ^o^</p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>屏蔽Edge更新&amp;降级</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/edge_noupdate.html"/>
        <id>https://zeyun.dpdns.org/edge_noupdate.html</id>
            <category term="科技分享"/>

        <updated>2025-11-23T02:22:35+08:00</updated>
            <summary>
                <![CDATA[
                    以下操作需要确保你当前的系统为win10/win11专业版及以上，否则无效 屏蔽Edge更新方法一 使用Windows内置防火墙禁用Edge更新 stp1：打开文件资源管理器，找到默认路径C:\Program Files&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h5 class="align-center">以下操作需要确保你当前的系统为win10/win11专业版及以上，否则无效</h5>
<h2 class="align-center">屏蔽Edge更新方法一</h2>
<p class="align-center">使用Windows内置防火墙禁用Edge更新</p>
<p>stp1：打开文件资源管理器，找到默认路径<code>C:\Program Files (x86)\Microsoft\EdgeUpdate</code></p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-014517.png" alt="" width="2119" height="722" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-014517-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-014517-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-014517-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-014517-xl.webp 1024w"></figure>
<p>stp2：鼠标右击下图的这个文件图标，点击复制文件地址</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-015130.png" alt="" width="957" height="975" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015130-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015130-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015130-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015130-xl.webp 1024w"></figure>
<p> </p>
<p>stp3：按下windows徽标，搜索CMD，<strong>以管理员身份运行</strong>CMD</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-015246.png" alt="" width="1517" height="1421" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015246-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015246-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015246-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-015246-xl.webp 1024w"></figure>
<p>stp4：复制以下代码，然后点击鼠标右键，粘贴刚刚的复制的路径（cmd中是右击鼠标粘贴）</p>
<pre class="language-python line-numbers"><code>netsh advfirewall firewall add rule name="Disable Edge Update" dir=out action=block program= 你的文件路径
#将“你的文件路径“替换成你刚才复制的内容</code></pre>
<p>然后再按下回车，成功后终端会显示“成功”字样</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-020838.png" alt="" width="1920" height="133" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-020838-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-020838-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-020838-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-020838-xl.webp 1024w"></figure>
<p>打开Edge，可以看到成功将Edge禁止联网更新了</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-022648.png" alt="" width="1755" height="426" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-022648-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-022648-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-022648-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-022648-xl.webp 1024w"></figure>
<p>如果第一个不行，就试试以下的这个方法二（如果你担心后面还会悄咪咪的更新，那也可以跟着下面接着做）</p>
<p class="align-center">想要直接降级的，可跳过方法二，看后面的安装部分</p>
<h2 class="align-center">屏蔽Edge更新方法二</h2>
<p><code>*注</code>：以下的操作可能会影响到其他的应用，还请注意</p>
<p>stp1：打开设置→网络和Internet→属性（good wifi是我的wifi名称，每个人的不一样）→按流量计费，打开这个</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/An-Liu-Liang-Ji-Fei-2.png" alt="" width="2087" height="1037" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/An-Liu-Liang-Ji-Fei-2-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/An-Liu-Liang-Ji-Fei-2-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/An-Liu-Liang-Ji-Fei-2-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/An-Liu-Liang-Ji-Fei-2-xl.webp 1024w"></figure>
<p>stp2：打开Edge，设置→关于Edge→通过流量计费，打开这个开关</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-032205.png" alt="" width="1620" height="129" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-032205-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-032205-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-032205-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-032205-xl.webp 1024w"></figure>
<p class="align-center">至此，你已经成功屏蔽Edge更新</p>
<p>stp1：下载官方的Edge安装包：<a href="https://www.microsoft.com/en-gb/edge/business/download?form=MA13H4" target="_blank" rel="noopener noreferrer">点我跳转</a></p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-023718.png" alt="" width="2711" height="1028" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-023718-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-023718-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-023718-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-023718-xl.webp 1024w"></figure>
<p><strong>下载后不要双击安装，请按照以下来操作</strong></p>
<p>stp2：复制你自己的下载的文件路径（你的位置肯能和我的不一样，那是因为我是自行移动了文件位置，如下如所示）</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-024156.png" alt="" width="1555" height="550" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024156-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024156-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024156-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024156-xl.webp 1024w"></figure>
<p>stp2：依旧以<strong>管理员身份运行</strong>CMD（如果你上一个窗口没关，可以继续操作）</p>
<p>stp3：使用以下的命令，进入下载的安装包的目录</p>
<pre class="language-python line-numbers"><code>cd 你的文件目录

#例如，我的是C:\Program Files (x86)\Microsoft\Edge
#那就cd C:\Program Files (x86)\Microsoft\Edge</code></pre>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-024618.png" alt="" width="999" height="279" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024618-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024618-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024618-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-024618-xl.webp 1024w"></figure>
<p>stp4：输入以下的代码</p>
<pre class="language-apacheconf line-numbers"><code>msiexec /I MicrosoftEdgeEnterpriseX64.msi ALLOWDOWNGRADE=1</code></pre>
<p class="align-center">安装完毕后，可以看到，你的Edge已经成功降级了</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/32/Ping-Mu-Jie-Tu-2025-11-23-031250.png" alt="" width="1808" height="655" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-031250-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-031250-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-031250-md.webp 768w ,https://zeyun.dpdns.org/media/posts/32/responsive/Ping-Mu-Jie-Tu-2025-11-23-031250-xl.webp 1024w"></figure>
<p class="align-center">The END</p>
<p class="align-center">感谢您的阅读，下一篇再见（￣︶￣）↗　</p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>数据库基础入门指南 Part 3</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/my_sql_part3.html"/>
        <id>https://zeyun.dpdns.org/my_sql_part3.html</id>
            <category term="数据库学习笔记"/>

        <updated>2025-11-19T21:59:27+08:00</updated>
            <summary>
                <![CDATA[
                    前提环境准备说明 本文所有题目基于以下两张核心表（就是我在 Part 2 里须要copy的那张表）&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <h2 class="header-iWP5WJ auto-hide-last-sibling-br align-center">前提环境准备说明</h2>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space align-center">本文所有题目基于以下两张核心表（就是我在 Part 2 里须要copy的那张表）</div>
<div class="align-center"><a href="https://zeyun.dpdns.org/my_sql_part2.html" target="_blank" rel="noopener noreferrer">点我跳转 <strong>Part 2</strong></a></div>
<div> </div>
<h5 class="align-center">表格内容回顾</h5>
<ul class="auto-hide-last-sibling-br">
<li><code>product_series</code>（产品系列表）：存储产品分类（如 iPhone Standard、iPad Pro），核心字段<code>series_id</code>（主键）、<code>series_name</code>（系列名称）、<code>product_type</code>（产品类型：iPhone/iPad）</li>
<li><code>products</code>（产品详情表）：存储具体型号参数，核心字段<code>product_id</code>（主键）、<code>model_name</code>（型号名称）、<code>release_year</code>（发布年份）、<code>series_id</code>（外键，关联系列表）、<code>screen_size_inch</code>（屏幕尺寸）等</li>
<li>模拟扩展表<code>sales</code>（产品销量表）：用于多表关联练习，字段含<code>sale_id</code>（主键）、<code>product_id</code>（关联产品表）、<code>sale_num</code>（销量）、<code>sale_year</code>（销售年份）</li>
</ul>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 1：使用 USING 语法查询产品型号 + 系列信息</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求：</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">用 USING 语法查询所有产品的型号名称（中文别名 “产品型号”）、系列名称（中文别名 “所属系列”）、产品类型（中文别名 “产品类型”）</div>
<h6><strong>思路参考：</strong></h6>
<div>
<pre class="language-sql line-numbers"><code>--语法格式
SELECT 
  表1别名.字段1 AS 中文别名1,
  表2别名.字段2 AS 中文别名2,
  表2别名.字段3 AS 中文别名3
FROM 表1 表1别名
INNER JOIN 表2 表2别名
USING(关联字段);  -- 仅当两张表的关联字段名称完全一致时可用USING</code></pre>
</div>
<h6><strong>答案如下：</strong></h6>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  p.model_name AS 产品型号,
  ps.series_name AS 所属系列,
  ps.product_type AS 产品类型
FROM products p
INNER JOIN product_series ps
USING(series_id);  -- USING语法：关联字段在两张表中名称相同（均为series_id），可简化写法
</code></pre>
</div>
<div>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li><code>USING(series_id)</code>是内连接的简化写法，当两张表的关联字段名称完全相同时（此处均为<code>series_id</code>），可替代<code>ON p.series_id = ps.series_id</code>，让代码更简洁</li>
<li>例如查询结果会同时显示 “iPhone 15” 对应的 “Standard” 系列和 “iPhone” 类型，“iPad Pro M5” 对应的 “Pro” 系列和 “iPad” 类型</li>
<li>作用：在关联字段同名时简化连接条件，同时保留内连接 “只匹配关联字段相等的数据” 的核心逻辑</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>USING 语法的适用场景（关联字段名称相同）</li>
<li>表别名与字段别名的使用（简化代码 + 优化结果可读性）</li>
</ol>
</div>
<div> </div>
<div>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 2：查询屏幕尺寸≥10 英寸的 iPad Pro 产品</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">查询屏幕尺寸≥10 英寸的 iPad Pro 系列产品，显示型号名称（“产品型号”）、屏幕尺寸（“屏幕尺寸 (英寸)”）、存储选项（“存储版本”），按屏幕尺寸升序排序</div>
<div>
<h6><strong>思路参考：</strong></h6>
</div>
</div>
<div>
<pre class="language-sql line-numbers"><code>--语法格式如下
SELECT 
  表1别名.字段1 AS 中文别名1,
  表1别名.字段2 AS 中文别名2,
  表1别名.字段3 AS 中文别名3
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 表2别名.筛选字段1 = '条件值1'
AND 表2别名.筛选字段2 = '条件值2'
AND 表1别名.筛选字段3 &gt;= 数值条件
ORDER BY 表1别名.排序字段 ASC;</code></pre>
<h6><strong>答案如下：</strong></h6>
</div>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  p.model_name AS 产品型号,
  p.screen_size_inch AS 屏幕尺寸(英寸),
  p.storage_options AS 存储版本
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE ps.product_type = 'iPad'  -- 筛选“iPad”类型
AND ps.series_name = 'Pro'    -- 筛选“Pro”系列
AND p.screen_size_inch &gt;= 10  -- 筛选屏幕尺寸≥10英寸
ORDER BY p.screen_size_inch ASC;  -- 按屏幕尺寸升序（ASC可省略，默认升序）</code></pre>
</div>
<div>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li>先通过<code>ON p.series_id = ps.series_id</code>关联两张表，确保每个产品都能匹配到对应的系列信息</li>
<li>再通过<code>WHERE</code>子句的三个条件精准筛选：只保留 “iPad 类型”“Pro 系列” 且 “屏幕≥10 英寸” 的数据，例如 “iPad Pro 11-inch (2018)”“iPad Pro 12.9-inch (3rd gen, 2018)” 等型号</li>
<li>最后用<code>ORDER BY p.screen_size_inch ASC</code>按屏幕尺寸从小到大排序，方便对比不同型号的屏幕差异</li>
<li>作用：实现 “多条件精准筛选 + 有序展示”，满足 “找特定规格产品” 的业务需求</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>多条件筛选（AND 连接多个过滤条件）</li>
<li>数值比较条件（≥等运算符的使用）</li>
<li>排序方向（ASC 升序的应用）</li>
</ol>
</div>
<div> </div>
<div>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 3：查询 2020 年后发布的产品（含型号、系列、初始系统、类型）</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">查询 2020 年及以后发布的所有产品，显示型号名称（“产品型号”）、系列名称（“所属系列”）、初始系统（“初始操作系统”）、产品类型（“产品类型”），按发布年份降序排列</div>
<div> </div>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><strong style="font-family: var(--font-base); font-size: 1em; letter-spacing: var(--letter-spacing);">思路参考：</strong></div>
<div>
<pre class="language-sql line-numbers"><code>--语法格式如下
SELECT 
  表1别名.字段1 AS 中文别名1,
  表2别名.字段2 AS 中文别名2,
  表1别名.字段3 AS 中文别名3,
  表2别名.字段4 AS 中文别名4
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 表1别名.时间字段 &gt;= 年份条件
ORDER BY 表1别名.时间字段 DESC;</code></pre>
<h6><strong>答案如下：</strong></h6>
</div>
</div>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  p.model_name AS 产品型号,
  ps.series_name AS 所属系列,
  p.initial_os AS 初始操作系统,
  ps.product_type AS 产品类型
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE p.release_year &gt;= 2020  -- 筛选2020年后发布的产品
ORDER BY p.release_year DESC;  -- 按发布年份倒序（最新产品在前）</code></pre>
</div>
<div>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li>关联表后，通过<code>WHERE p.release_year &gt;= 2020</code>筛选出 2020 年及之后发布的产品，例如 “iPhone 12”“iPad Air 4” 等</li>
<li>查询结果包含型号、系列、初始系统和产品类型，相当于 “一站式获取产品的基础信息 + 分类信息”</li>
<li><code>ORDER BY p.release_year DESC</code>让最新发布的产品（如 2025 年的 “iPhone 17”）排在最前面，符合 “关注新品” 的常规需求</li>
<li>作用：按时间范围筛选数据，并整合多维度信息，便于快速了解产品迭代情况</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>时间条件筛选（年份字段的比较）</li>
<li>多字段提取（整合不同表的关键信息）</li>
<li>降序排序（DESC 在时间类数据中的应用）</li>
</ol>
</div>
<div> </div>
<div>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 4：多表内连接（模拟销量表查询 2022 年高销量产品）</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">新增 “产品销量表（sales）”，字段：sale_id (主键自增)、product_id (关联产品表)、sale_num (销量)、sale_year (销售年份)；查询 2022 年销量≥1000 的产品，显示型号名称（“产品型号”）、系列名称（“所属系列”）、产品类型（“产品类型”）、销量（“2022 年销量”）</div>
<h6><strong>数据补充：</strong></h6>
<div>
<pre class="language-sql line-numbers"><code>-- 先模拟创建销量表并插入测试数据（实际使用时执行）
CREATE TABLE IF NOT EXISTS sales (
  sale_id INT PRIMARY KEY AUTO_INCREMENT,
  product_id INT NOT NULL,
  sale_num INT NOT NULL,
  sale_year YEAR NOT NULL,
  FOREIGN KEY (product_id) REFERENCES products(product_id)
);
INSERT INTO sales (product_id, sale_num, sale_year) VALUES
(1, 1200, 2022), (5, 1500, 2022), (10, 900, 2022), (15, 2000, 2022);</code></pre>
</div>
<div><strong style="font-family: var(--font-base); font-size: 1em; letter-spacing: var(--letter-spacing);">思路参考：</strong></div>
</div>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  表1别名.字段1 AS 中文别名1,
  表2别名.字段2 AS 中文别名2,
  表2别名.字段3 AS 中文别名3,
  表3别名.字段4 AS 中文别名4
FROM 表1 表1别名
INNER JOIN 表2 表2别名 ON 表1别名.关联字段1 = 表2别名.关联字段1
INNER JOIN 表3 表3别名 ON 表1别名.关联字段2 = 表3别名.关联字段2
WHERE 表3别名.筛选字段1 = 条件值1
AND 表3别名.筛选字段2 &gt;= 条件值2;</code></pre>
<h6><strong>答案如下：</strong></h6>
</div>
<div>
<pre class="language-sql line-numbers"><code>-- 多表连接查询SQL
SELECT 
  p.model_name AS 产品型号,
  ps.series_name AS 所属系列,
  ps.product_type AS 产品类型,
  s.sale_num AS 2022年销量
FROM products p
INNER JOIN product_series ps ON p.series_id = ps.series_id  -- 先关联产品表和系列表
INNER JOIN sales s ON p.product_id = s.product_id          -- 再关联销量表
WHERE s.sale_year = 2022  -- 筛选2022年销量数据
AND s.sale_num &gt;= 1000; -- 筛选销量≥1000的产品</code></pre>
</div>
<div>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li>这是三张表的关联查询：先通过<code>products</code>与<code>product_series</code>关联获取产品分类信息，再通过<code>products</code>与<code>sales</code>关联获取销量数据，形成 “产品详情→分类→销量” 的完整链条</li>
<li>筛选条件<code>s.sale_year = 2022 AND s.sale_num &gt;= 1000</code>确保只显示 2022 年销量超 1000 的产品，例如假设 “iPhone 14” 在 2022 年销量 1500，就会被选中</li>
<li>作用：实现跨表数据整合，解决 “哪些高销量产品属于什么系列” 这类复杂业务问题</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>多表内连接语法（连续使用 INNER JOIN 关联多张表）</li>
<li>多表关联条件（每张表需明确与其他表的关联字段）</li>
<li>基于业务场景的多表数据整合</li>
</ol>
</div>
<div> </div>
<div>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 5：统计每个 iPhone 系列的产品总数</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">统计每个 iPhone 系列的产品数量，显示系列名称（“iPhone 系列”）、产品总数（“产品数量”），按产品数量降序排序</div>
<h6>思路参考：</h6>
<div>
<pre class="language-sql line-numbers"><code>--语法格式如下
SELECT 
  表2别名.分组字段 AS 中文别名1,
  COUNT(表1别名.主键字段) AS 中文别名2  -- 用主键计数，避免NULL影响结果
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 表2别名.筛选字段 = '条件值'
GROUP BY 表2别名.分组字段
ORDER BY 中文别名2 DESC;</code></pre>
<h6>答案如下：</h6>
</div>
</div>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  ps.series_name AS iPhone系列,
  COUNT(p.product_id) AS 产品数量  -- COUNT统计产品ID（非NULL值），确保计数准确
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE ps.product_type = 'iPhone'  -- 仅统计iPhone产品
GROUP BY ps.series_name  -- 按系列名称分组（每个系列对应一组统计）
ORDER BY 产品数量 DESC;  -- 按产品数量倒序</code></pre>
</div>
<div>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li><code>GROUP BY ps.series_name</code>将 iPhone 产品按系列分组（如 “Standard”“Pro”“Plus” 等单独成组）</li>
<li><code>COUNT(p.product_id)</code>统计每组内的产品数量（用主键<code>product_id</code>计数，确保不会漏算或多算），例如 “Standard” 系列可能有 10 款产品，“Pro” 系列有 7 款</li>
<li>排序后能直观看到哪个系列的产品型号最多，方便分析产品布局</li>
<li>作用：按类别统计数量，回答 “每个分类有多少数据” 的问题</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>GROUP BY 分组逻辑（按类别聚合数据）</li>
<li>COUNT 聚合函数（统计记录数量，优先使用主键）</li>
<li>分组后排序（按统计结果排序，强化数据可读性）</li>
</ol>
</div>
<div> </div>
<div>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 6：查询平均电池容量≥3000mAh 的 iPhone 系列</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">查询平均电池容量≥3000mAh 的 iPhone 系列，显示系列名称（“iPhone 系列”）、平均电池容量（“平均电池容量 (mAh)”，保留 1 位小数），按平均电池容量降序排序</div>
<h6>思路参考：</h6>
</div>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  表2别名.分组字段 AS 中文别名1,
  ROUND(AVG(表1别名.数值字段), 保留小数位数) AS 中文别名2
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 表2别名.筛选字段 = '条件值'
AND 表1别名.数值字段 IS NOT NULL  -- 排除NULL值
GROUP BY 表2别名.分组字段
HAVING 中文别名2 &gt;= 数值条件  -- 分组后筛选用HAVING（WHERE无法筛选聚合结果）
ORDER BY 中文别名2 DESC;</code></pre>
<h6>答案如下：</h6>
</div>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
ps.series_name AS iPhone系列,ROUND(AVG(p.battery_capacity_mah), 1) AS 平均电池容量(mAh) 
 -- ROUND(值,1)保留1位小数
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE ps.product_type = 'iPhone'  -- 仅统计iPhone产品
AND p.battery_capacity_mah IS NOT NULL  -- 排除电池容量为NULL的数据（避免影响平均值）
GROUP BY ps.series_name
HAVING 平均电池容量(mAh) &gt;= 3000  -- 分组后筛选：平均容量≥3000mAh（注意用HAVING而非WHERE）
ORDER BY 平均电池容量(mAh) DESC;</code></pre>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li><code>AVG(p.battery_capacity_mah)</code>计算每个 iPhone 系列的平均电池容量，例如 “Plus” 系列可能平均 4000mAh，“mini” 系列可能平均 2300mAh。</li>
<li><code>ROUND(..., 1)</code>将平均值保留 1 位小数（如 3279.0 而不是 3279），让结果更规范。</li>
<li><code>HAVING 平均电池容量(mAh) &gt;= 3000</code>筛选出平均容量达标的系列（注意：分组后的筛选必须用 HAVING，不能用 WHERE）。</li>
<li>作用：实现 “按类别算平均值 + 筛选达标的类别”，适合分析产品性能差异。</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>AVG 聚合函数（计算数值字段的平均值）</li>
<li>ROUND 函数（格式化数值，保留指定小数位数）</li>
<li>HAVING 子句（分组后筛选聚合结果，与 WHERE 区分）</li>
</ol>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 7：查询初始系统为 iOS 16 及以上的 Pro 系列产品</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">查询初始系统是 iOS 16、iOS 17、iOS 18 或 iOS 26 的 Pro 系列产品（含 iPhone 和 iPad），显示型号名称（“产品型号”）、系列名称（“所属系列”）、产品类型（“产品类型”）、初始系统（“初始操作系统”），按产品类型升序排序</div>
<h6><strong style="font-family: var(--font-base); font-size: 1em; letter-spacing: var(--letter-spacing);">思路参考：</strong></h6>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  表1别名.字段1 AS 中文别名1,
  表2别名.字段2 AS 中文别名2,
  表2别名.字段3 AS 中文别名3,
  表1别名.字段4 AS 中文别名4
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 表2别名.筛选字段1 = '条件值1'
AND 表1别名.筛选字段2 IN ('条件值2', '条件值3', '条件值4')  -- IN简化多值匹配
ORDER BY 表2别名.排序字段 ASC;</code></pre>
<h6><strong style="font-family: var(--font-base); font-size: 1em; letter-spacing: var(--letter-spacing);">答案如下：</strong></h6>
</div>
<pre class="language-sql line-numbers"><code>SELECT 
  p.model_name AS 产品型号,
  ps.series_name AS 所属系列,
  ps.product_type AS 产品类型,
  p.initial_os AS 初始操作系统
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE ps.series_name = 'Pro'  -- 筛选Pro系列
AND p.initial_os IN ('iOS 16', 'iOS 17', 'iOS 18', 'iOS 26')  -- IN匹配多个系统值
ORDER BY ps.product_type ASC;  -- 按产品类型升序（iPhone在前或iPad在前，按字母排序）</code></pre>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li><code>IN ('iOS 16', 'iOS 17', 'iOS 18', 'iOS 26')</code>是多值匹配的简化写法，相当于 “初始系统 = iOS 16 OR 初始系统 = iOS 17 ...”，筛选出搭载较新系统的产品</li>
<li>结果只包含 “Pro” 系列（如 “iPhone 14 Pro”“iPad Pro 11-inch (4th gen, 2022)”），且按产品类型升序排列（通常 “iPad” 会排在 “iPhone” 前面，按字母顺序）</li>
<li>作用：高效匹配多个离散值，快速定位符合特定属性的产品</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>IN 运算符（简化多值匹配条件）</li>
<li>字符型字段的筛选（匹配系统版本等文本信息）</li>
<li>按分类字段排序（让同类型数据集中展示）</li>
</ol>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br">题目 8：统计 2021 年后发布的各系列产品数量</h3>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目要求</h4>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">统计 2021 年及以后发布的各产品系列（含 iPhone 和 iPad）的产品数量，显示产品类型（“产品类型”）、系列名称（“所属系列”）、产品数量（“产品数量”），按产品类型升序、产品数量降序排序</div>
<h6><span style="color: var(--headings-color); font-family: var(--font-base); font-size: 1em; font-weight: var(--font-weight-bold); letter-spacing: var(--letter-spacing);">思路参考：</span></h6>
<div>
<pre class="language-sql line-numbers"><code>SELECT 
  表2别名.分组字段1 AS 中文别名1,
  表2别名.分组字段2 AS 中文别名2,
  COUNT(表1别名.主键字段) AS 中文别名3
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 表1别名.时间字段 &gt;= 条件值
GROUP BY 表2别名.分组字段1, 表2别名.分组字段2  -- 联合分组：按多个字段分组
ORDER BY 表2别名.分组字段1 ASC, 中文别名3 DESC;  -- 多字段排序：先排字段1，再排统计结果</code></pre>
<h6><strong style="font-family: var(--font-base); font-size: 1em; letter-spacing: var(--letter-spacing);">答案如下：</strong></h6>
<pre class="language-sql line-numbers"><code>SELECT 
  ps.product_type AS 产品类型,
  ps.series_name AS 所属系列,
  COUNT(p.product_id) AS 产品数量
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE p.release_year &gt;= 2021  -- 筛选2021年后发布的产品
GROUP BY ps.product_type, ps.series_name  -- 按“产品类型+系列名称”联合分组（同一类型下的不同系列）
ORDER BY ps.product_type ASC, 产品数量 DESC;  -- 先按类型升序，再按数量降序</code></pre>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">含义解释</h4>
<ul class="auto-hide-last-sibling-br">
<li><code>GROUP BY ps.product_type, ps.series_name</code>是 “联合分组”，先按 “产品类型”（iPhone/iPad）分大类，再在每个大类下按 “系列名称” 分小类（如 iPad 下的 “数字版”“Air” 等）。</li>
<li>统计结果能同时看到 “iPhone 的 Pro 系列有 5 款 2021 年后的产品”“iPad 的 Air 系列有 4 款” 等信息。</li>
<li>排序规则<code>ps.product_type ASC, 产品数量 DESC</code>确保先按类型归类，同一类型内按数量从多到少排列，层次清晰。</li>
<li>作用：实现多级分类统计，适合分析不同类别下的子分类数据分布。</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">核心知识点</h4>
<ol class="auto-hide-last-sibling-br">
<li>联合分组（GROUP BY 多个字段，实现多级分类）</li>
<li>多字段排序（按多个条件排序，先主后次）</li>
<li>时间范围 + 分类统计的组合应用</li>
</ol>
<h2 class="header-iWP5WJ auto-hide-last-sibling-br align-center">总结</h2>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space align-center">本文通过举例苹果产品设备库的现实场景，覆盖了内连接查询的核心考点：从基础的 <strong>ON/USING</strong> 语法、多条件<strong>筛选排序</strong>，到进阶的<strong>多表关联</strong>、<strong>分组聚合（COUNT/AVG）</strong>、<strong>HAVING 筛选</strong>等</div>
<h5 class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space align-center"><strong>未完待续 ing</strong></h5>
</div>
</div>
            ]]>
        </content>
    </entry>
    <entry>
        <title>数据库基础入门指南 Part 2</title>
        <author>
            <name>云泽</name>
        </author>
        <link href="https://zeyun.dpdns.org/my_sql_part2.html"/>
        <id>https://zeyun.dpdns.org/my_sql_part2.html</id>
            <category term="数据库学习笔记"/>

        <updated>2025-11-16T22:40:00+08:00</updated>
            <summary>
                <![CDATA[
                    本章内容概述：学习简单的连接查询 本章难度：(⭐⭐⭐⭐/⭐) 连接查询是一种数据库查询技术，用于将多张表中存在关联关系的数据合并在一起，从而获取更完整的信息。以苹果产品库为例，product_series 表存储了产品系列的分类信息（如系列名称、产品类型），products 表存储了具体产品型号的参数（如型号名称、发布年份）。这两张表通过 series_id 字段产生关联（products 的 series_id 关联 product_series 的 series_id）。连接查询就是通过这个关联关系，把两张表中匹配的数据 “拼接” 成一条结果，让我们能同时看到产品型号所属的系列和类型等信息&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p><span style="color: var(--headings-color); font-family: var(--font-base); font-size: 1.80203em; font-weight: var(--font-weight-bold); letter-spacing: var(--letter-spacing);">本章内容概述：学习简单的连接查询</span></p>
<p>本章难度：(⭐⭐⭐⭐/⭐)</p>
<h2 class="align-center">Stp 1：基础知识储备（<strong>新手3问环节</strong>）</h2>
<h3>Q：什么是连接查询？</h3>
<h3><strong>A:</strong></h3>
<p>连接查询是一种数据库查询技术，用于<strong>将多张表中存在关联关系的数据合并在一起</strong>，从而获取更完整的信息。以苹果产品库为例，<code>product_series</code> 表存储了产品系列的分类信息（如系列名称、产品类型），<code>products</code> 表存储了具体产品型号的参数（如型号名称、发布年份）。这两张表通过 <code>series_id</code> 字段产生关联（<code>products</code> 的 <code>series_id</code> 关联 <code>product_series</code> 的 <code>series_id</code>）。连接查询就是通过这个关联关系，把两张表中匹配的数据 “拼接” 成一条结果，让我们能同时看到产品型号所属的系列和类型等信息</p>
<h3>Q：学了这个连接查询有什么用？</h3>
<h3><strong>A:</strong></h3>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">在实际业务中，我们很少只关注单张表的数据，比如：</div>
<ul class="auto-hide-last-sibling-br" style="list-style-type: square;">
<li>作为苹果产品爱好者，你想知道 “iPhone 15 属于哪个系列”，就需要把 <code>products</code> 表的型号和 <code>product_series</code> 表的系列关联起来查询</li>
<li>作为市场分析师，你想统计 “每个 iPad 系列有多少款产品”，也需要通过连接查询将系列分类和具体产品数结合起来</li>
</ul>
<p> </p>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">如果不用连接查询，只用 <code>products</code> 表，你只能看到产品的 <code>series_id</code> 却不知道对应的系列名称；只用 <code>product_series</code> 表，又看不到具体有哪些产品型号。所以连接查询能帮我们<strong>整合多表的关联信息</strong>，解决更复杂的业务问题</div>
<h3>Q：如何去学习这个连接查询:</h3>
<h3><strong>A:</strong></h3>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">可以按照 “从简单到复杂” 的路径学习：</div>
<ul class="auto-hide-last-sibling-br" style="list-style-type: square;">
<li><strong>第一步：掌握基础内连接语法</strong>
<div class="container-Uxvbjy md-box-line-break wrapper-GYqxgQ undefined"> </div>
先学会把两张表通过关联字段连接起来，获取最基础的关联数据</li>
<li><strong>第二步：添加筛选条件</strong>
<div class="container-Uxvbjy md-box-line-break wrapper-GYqxgQ undefined"> </div>
在连接的基础上，过滤出自己需要的特定数据</li>
<li><strong>第三步：结合排序、聚合等操作</strong>
<div class="container-Uxvbjy md-box-line-break wrapper-GYqxgQ undefined"> </div>
让查询结果更符合业务需求，比如按时间排序、统计平均值等</li>
</ul>
<p><strong>了解完基础的概念前奏和对应的疑问，接下来我会带着你结合最简单的几道小题，去学习这个知识点</strong></p>
<h2 class="align-center">Stp 2：学习前的数据准备</h2>
<p>可以参考以下的SQL语句（不懂的语句可以参考注释，实在不明白就去问AI吧，我也没招了）</p>
<p>以下数据可直接<strong>复制粘贴到查询语句中去运行</strong>（必要条件）</p>
<pre class="language-sql line-numbers"><code>-- 创建数据库：如果不存在名为apple_products_db的数据库则创建，指定字符集为utf8mb4（支持所有Unicode字符），排序规则为utf8mb4_unicode_ci（支持多语言排序）
CREATE DATABASE IF NOT EXISTS apple_products_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
-- 使用该数据库（后续操作都在这个数据库中执行）
USE apple_products_db;

-- 产品系列表：用于分类产品（如iPhone标准版、iPad Pro等）
CREATE TABLE product_series (
    series_id INT PRIMARY KEY AUTO_INCREMENT,  -- 系列ID：整数类型，主键（唯一标识），自动增长（插入时无需手动填写）
    series_name VARCHAR(50) NOT NULL,  -- 系列名称：字符串类型，最大长度50字符，不能为空（如"Standard"、"Pro"）
    product_type ENUM('iPhone', 'iPad') NOT NULL,  -- 产品类型：枚举类型，只能从指定值中选择，不能为空（限制为iPhone或iPad）
    UNIQUE KEY uk_series_type (series_name, product_type)  -- 唯一键：确保同一产品类型下的系列名称不重复（如不会有两个"Pro"的iPhone系列）
);

-- 产品详细信息表：存储具体型号的参数
CREATE TABLE products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,  -- 产品ID：整数类型，主键，自动增长（唯一标识每个型号）
    model_name VARCHAR(100) NOT NULL,  -- 型号名称：字符串类型，最大长度100字符，不能为空（如"iPhone 15 Pro"、"iPad Air 5"）
    release_year YEAR NOT NULL,  -- 发布年份：年份类型，不能为空（如2023、2024）
    series_id INT NOT NULL,  -- 所属系列ID：整数类型，不能为空，关联到product_series表的series_id
    battery_capacity_mah DECIMAL(6,1) NULL,  -- 电池容量（毫安时）：十进制数字类型，总长度6位（含小数），保留1位小数，允许为空（查不到数据时用NULL）
    screen_size_inch DECIMAL(3,1) NULL,  -- 屏幕尺寸（英寸）：十进制数字类型，总长度3位（含小数），保留1位小数，允许为空（查不到数据时用NULL）
    initial_os VARCHAR(50) NULL,  -- 初始系统：字符串类型，最大长度50字符，允许为空（如"iOS 17"、"iPadOS 16"）
    storage_options VARCHAR(100) NULL,  -- 存储选项：字符串类型，最大长度100字符，允许为空（如"128GB, 256GB"）
    FOREIGN KEY fk_series (series_id) REFERENCES product_series(series_id)  -- 外键约束：series_id的值必须存在于product_series表的series_id中
        ON DELETE RESTRICT ON UPDATE CASCADE  -- 删除限制：不允许删除被引用的系列；更新级联：系列ID更新时，此处自动同步
);

-- 插入产品系列数据：向product_series表添加分类数据
-- 语法格式：INSERT INTO 表名 (字段1, 字段2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...);
INSERT INTO product_series (series_name, product_type) VALUES
('Standard', 'iPhone'),
('Plus', 'iPhone'),
('Xs/Xr', 'iPhone'),
('mini', 'iPhone'),
('Pro', 'iPhone'),
('数字版', 'iPad'),
('Air', 'iPad'),
('mini', 'iPad'),
('Pro', 'iPad');

-- 插入iPhone数据：向products表添加iPhone型号数据
-- 语法格式：INSERT INTO 表名 (字段1, 字段2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...);
INSERT INTO products (model_name, release_year, series_id, battery_capacity_mah, screen_size_inch, initial_os, storage_options) VALUES
-- 标准版
('iPhone 7', 2016, 1, 1960.0, 4.7, 'iOS 10', '32GB, 128GB, 256GB'),
('iPhone 8', 2017, 1, 1821.0, 4.7, 'iOS 11', '64GB, 256GB'),
('iPhone X', 2017, 1, 2716.0, 5.8, 'iOS 11', '64GB, 256GB'),
('iPhone 11', 2019, 1, 3110.0, 6.1, 'iOS 13', '64GB, 128GB, 256GB'),
('iPhone 12', 2020, 1, 2815.0, 6.1, 'iOS 14', '64GB, 128GB, 256GB'),
('iPhone 13', 2021, 1, 3227.0, 6.1, 'iOS 15', '128GB, 256GB, 512GB'),
('iPhone 14', 2022, 1, 3279.0, 6.1, 'iOS 16', '128GB, 256GB, 512GB, 1TB'),
('iPhone 15', 2023, 1, 3300.0, 6.1, 'iOS 17', '128GB, 256GB, 512GB, 1TB'),
('iPhone 16', 2024, 1, NULL, 6.1, 'iOS 18', '128GB, 256GB, 512GB, 1TB'),
('iPhone 17', 2025, 1, NULL, 6.1, 'iOS 26', '256GB, 512GB, 1TB, 2TB'),

-- Plus型号
('iPhone 7 Plus', 2016, 2, 2900.0, 5.5, 'iOS 10', '32GB, 128GB, 256GB'),
('iPhone 8 Plus', 2017, 2, 2691.0, 5.5, 'iOS 11', '64GB, 256GB'),
('iPhone 14 Plus', 2022, 2, 4323.0, 6.7, 'iOS 16', '128GB, 256GB, 512GB, 1TB'),
('iPhone 15 Plus', 2023, 2, 4422.0, 6.7, 'iOS 17', '128GB, 256GB, 512GB, 1TB'),

-- Xs/Xr分支
('iPhone Xs', 2018, 3, 2658.0, 5.8, 'iOS 12', '64GB, 256GB, 512GB'),
('iPhone Xs Max', 2018, 3, 3174.0, 6.5, 'iOS 12', '64GB, 256GB, 512GB'),
('iPhone Xr', 2018, 3, 2942.0, 6.1, 'iOS 12', '64GB, 128GB, 256GB'),

-- mini型号
('iPhone 12 mini', 2020, 4, 2227.0, 5.4, 'iOS 14', '64GB, 128GB, 256GB'),
('iPhone 13 mini', 2021, 4, 2406.0, 5.4, 'iOS 15', '128GB, 256GB, 512GB'),

-- Pro型号
('iPhone 11 Pro', 2019, 5, 3046.0, 5.8, 'iOS 13', '64GB, 256GB, 512GB'),
('iPhone 12 Pro', 2020, 5, 2815.0, 6.1, 'iOS 14', '128GB, 256GB, 512GB'),
('iPhone 13 Pro', 2021, 5, 3095.0, 6.1, 'iOS 15', '128GB, 256GB, 512GB, 1TB'),
('iPhone 14 Pro', 2022, 5, 3200.0, 6.1, 'iOS 16', '128GB, 256GB, 512GB, 1TB'),
('iPhone 15 Pro', 2023, 5, 3279.0, 6.1, 'iOS 17', '128GB, 256GB, 512GB, 1TB'),
('iPhone 16 Pro', 2024, 5, NULL, 6.1, 'iOS 18', '256GB, 512GB, 1TB, 2TB'),
('iPhone 17 Pro', 2025, 5, NULL, 6.1, 'iOS 26', '256GB, 512GB, 1TB, 2TB');

-- 插入iPad数据：向products表添加iPad型号数据
-- 语法格式：INSERT INTO 表名 (字段1, 字段2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...);
INSERT INTO products (model_name, release_year, series_id, battery_capacity_mah, screen_size_inch, initial_os, storage_options) VALUES
-- 数字版
('iPad (5th gen)', 2017, 6, 8827.0, 9.7, 'iOS 10.3', '32GB, 128GB'),
('iPad (6th gen)', 2018, 6, 8827.0, 9.7, 'iOS 12', '32GB, 128GB'),
('iPad (7th gen)', 2019, 6, 8827.0, 10.2, 'iPadOS 13', '32GB, 128GB'),
('iPad (8th gen)', 2020, 6, 8827.0, 10.2, 'iPadOS 14', '32GB, 128GB'),
('iPad (9th gen)', 2021, 6, 8827.0, 10.2, 'iPadOS 15', '64GB, 256GB'),
('iPad (10th gen)', 2022, 6, 7700.0, 10.9, 'iPadOS 16', '64GB, 256GB'),
('iPad (11th gen)', 2024, 6, NULL, 10.9, 'iPadOS 18', '64GB, 256GB, 512GB'),

-- Air系列
('iPad Air 2', 2014, 7, 7340.0, 9.7, 'iOS 8.1', '16GB, 32GB, 64GB, 128GB'),
('iPad Air 3', 2019, 7, 8134.0, 10.5, 'iPadOS 12.2', '64GB, 256GB'),
('iPad Air 4', 2020, 7, 7700.0, 10.9, 'iPadOS 14.1', '64GB, 256GB'),
('iPad Air 5', 2022, 7, NULL, 10.9, 'iPadOS 15.4', '64GB, 256GB'),
('iPad Air 6', 2023, 7, NULL, 10.9, 'iPadOS 17', '64GB, 256GB, 512GB'),
('iPad Air 7 ', 2024, 7, NULL, 10.9, 'iPadOS 18', '128GB, 256GB, 512GB, 1TB'),

-- mini系列
('iPad mini 4', 2015, 8, 5124.0, 7.9, 'iOS 9.0', '16GB, 32GB, 64GB, 128GB'),
('iPad mini 5', 2019, 8, 5124.0, 7.9, 'iPadOS 12.2', '64GB, 256GB'),
('iPad mini 6', 2021, 8, 5124.0, 8.3, 'iPadOS 15', '64GB, 256GB'),
('iPad mini 7', 2024, 8, NULL, 8.3, 'iPadOS 18', '128GB, 256GB, 512GB'),

-- Pro系列
('iPad Pro 11-inch (2018)', 2018, 9, 9720.0, 11.0, 'iPadOS 12.1', '64GB, 256GB, 512GB, 1TB'),
('iPad Pro 12.9-inch (3rd gen, 2018)', 2018, 9, 10307.0, 12.9, 'iPadOS 12.1', '64GB, 256GB, 512GB, 1TB'),
('iPad Pro 11-inch (2nd gen, 2020)', 2020, 9, 9720.0, 11.0, 'iPadOS 13.4', '128GB, 256GB, 512GB, 1TB'),
('iPad Pro 12.9-inch (4th gen, 2020)', 2020, 9, 10090.0, 12.9, 'iPadOS 13.4', '128GB, 256GB, 512GB, 1TB'),
('iPad Pro 11-inch (3rd gen, 2021)', 2021, 9, NULL, 11.0, 'iPadOS 14.5', '128GB, 256GB, 512GB, 1TB'),
('iPad Pro 12.9-inch (5th gen, 2021)', 2021, 9, NULL, 12.9, 'iPadOS 14.5', '128GB, 256GB, 512GB, 1TB'),
('iPad Pro 11-inch (4th gen, 2022)', 2022, 9, NULL, 11.0, 'iPadOS 16', '128GB, 256GB, 512GB, 1TB'),
('iPad Pro 12.9-inch (6th gen, 2022)', 2022, 9, NULL, 12.9, 'iPadOS 16', '128GB, 256GB, 512GB, 1TB'),
('iPad Pro M5 (11-inch, 2024)', 2024, 9, NULL, 11.0, 'iPadOS 26', '256GB, 512GB, 1TB, 2TB');</code></pre>
<p>注意：创建完成后别忘记了<code>USE apple_products_db;</code></p>
<p>成功后你会看到以下两张表已经创建成功，并且这两张表的数据也会出现</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/30/Ping-Mu-Jie-Tu-2025-11-16-225738.png" alt="" width="427" height="571" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-225738-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-225738-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-225738-md.webp 768w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-225738-xl.webp 1024w"></figure>
<h6>可以使用以下的语句去查看这个product_series表的创建是否成功</h6>
<pre class="language-sql line-numbers"><code>--查询语句，升序（从小到大排序）
SELECT * FROM product_series ORDER BY series_id ASC;</code></pre>
<p>成功后如下图所示：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/30/Ping-Mu-Jie-Tu-2025-11-16-235518.png" alt="" width="1960" height="776" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235518-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235518-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235518-md.webp 768w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235518-xl.webp 1024w"></figure>
<h6>如下语句去查看这个products表是否成功</h6>
<pre class="language-sql line-numbers"><code>--简单的全查询语句，详细解释请看上一篇Part1
SELECT * FROM products;</code></pre>
<p>成功后如下图所示：</p>
<figure class="post__image"><img loading="lazy"  src="https://zeyun.dpdns.org/media/posts/30/Ping-Mu-Jie-Tu-2025-11-16-235929.png" alt="" width="1906" height="1284" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235929-xs.webp 320w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235929-sm.webp 480w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235929-md.webp 768w ,https://zeyun.dpdns.org/media/posts/30/responsive/Ping-Mu-Jie-Tu-2025-11-16-235929-xl.webp 1024w"></figure>
<h2 class="align-center">Stp 3：实战演练</h2>
<h5 class="align-center"><code>*注</code>：以下题目会配合讲解一同出现，如有必要，请自行先看题，再去看解析</h5>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目 1：请查询所有产品的型号名称、所属系列名称和产品类型</h4>
<p class="header-iWP5WJ auto-hide-last-sibling-br"><strong>此题核心点：基础的内连接查询（获取产品 + 系列关联信息</strong>）</p>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"> </div>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">本题的SQL示例语句如下：</div>
<div>
<pre class="language-sql line-numbers"><code>-- 查询所有产品的型号、所属系列和产品类型
SELECT 
  p.model_name AS 型号名称,
  ps.series_name AS 系列名称,
  ps.product_type AS 产品类型
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id;

--语法结构如下
SELECT 
  表1别名.字段1 [AS 别名1],
  表2别名.字段2 [AS 别名2]
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段;</code></pre>
</div>
<div>
<p class="header-iWP5WJ auto-hide-last-sibling-br"><strong>含义解释：</strong></p>
<ul class="auto-hide-last-sibling-br">
<li><code>FROM products p</code>：从<code>products</code>表查询，给表起个别名<code>p</code>（方便后续简写）</li>
<li><code>INNER JOIN product_series ps</code>：用内连接关联<code>product_series</code>表，别名<code>ps</code></li>
<li><code>ON p.series_id = ps.series_id</code>：连接的条件 ——<code>products</code>表的<code>series_id</code>必须和<code>product_series</code>表的<code>series_id</code>相等（这是两张表的 "桥梁"）</li>
<li><code>SELECT</code>后的字段：从关联后的结果中，提取需要的信息（这里取了型号、系列名称、产品类型）</li>
<li><code>AS</code>：给字段起中文别名，让结果更易读</li>
</ul>
</div>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目 2：请查询 2022 年及以后发布的 iPhone Pro 系列产品，显示型号名称、发布年份和初始系统</h4>
<p><strong>此题核心点：带筛选条件的内连接（查询特定类型产品）</strong></p>
<p>本题的SQL示例语句如下：</p>
<pre class="language-sql line-numbers"><code>-- 查询所有iPhone Pro系列的产品型号和发布年份
SELECT 
  p.model_name AS 型号名称,
  p.release_year AS 发布年份,
  ps.series_name AS 系列名称
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE ps.product_type = 'iPhone'  -- 筛选产品类型为iPhone
AND ps.series_name = 'Pro';     -- 同时筛选系列名称为Pro

--语法结构如下
SELECT 
  表1别名.字段1 [AS 别名1],
  表2别名.字段2 [AS 别名2]
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 筛选条件1 
AND 筛选条件2;  -- 多个条件用AND连接</code></pre>
<p class="header-iWP5WJ auto-hide-last-sibling-br"><strong>含义解释：</strong></p>
<ul class="auto-hide-last-sibling-br">
<li>前面的<code>FROM</code>、<code>INNER JOIN</code>、<code>ON</code>和示例 1 作用相同，先完成两张表的关联</li>
<li><code>WHERE</code>后面的是筛选条件：在关联后的所有数据中，只保留 "产品类型是 iPhone" 且 "系列名称是 Pro" 的数据</li>
<li>执行顺序：先关联表，再按条件筛选，最后返回符合条件的结果（比如这里会得到 iPhone 11 Pro、iPhone 12 Pro 等型号）</li>
</ul>
<h4 class="header-iWP5WJ auto-hide-last-sibling-br">题目 3：请统计每个 iPad 系列的产品平均屏幕尺寸，结果按平均屏幕尺寸从大到小排序</h4>
<p><strong>此题核心点：内连接 + 排序（按发布时间整理结果）</strong></p>
<p>本题的SQL示例语句如下：</p>
<pre class="language-sql line-numbers"><code>--请统计每个 iPad 系列的产品平均屏幕尺寸，结果按平均屏幕尺寸从大到小排序
SELECT 
  ps.series_name,
AVG(p.screen_size_inch) AS avg_screen_size
FROM products p
INNER JOIN product_series ps
ON p.series_id = ps.series_id
WHERE ps.product_type = 'iPad'
GROUP BY ps.series_name
ORDER BY avg_screen_size DESC;

--语法结构如下
SELECT 
  表2别名.分组字段,
  聚合函数(表1别名.数值字段) AS 别名
FROM 表1 表1别名
INNER JOIN 表2 表2别名
ON 表1别名.关联字段 = 表2别名.关联字段
WHERE 筛选条件
GROUP BY 表2别名.分组字段
ORDER BY 聚合结果别名 DESC;</code></pre>
<p class="header-iWP5WJ auto-hide-last-sibling-br"><strong>含义解释：</strong></p>
<ul class="auto-hide-last-sibling-br">
<li><code>WHERE ps.product_type = 'iPad'</code>：先筛选出所有 iPad 类型的产品，排除 iPhone 的数据干扰</li>
<li><code>GROUP BY ps.series_name</code>：将筛选后的 iPad 产品按系列名称分组，比如 "数字版"、"Air"、"Pro" 等各自成为一组</li>
<li><code>AVG(p.screen_size_inch)</code>：对每组内的屏幕尺寸字段计算平均值，例如 Pro 系列可能平均 11.9 英寸，mini 系列可能平均 8.1 英寸</li>
<li><code>AS avg_screen_size</code>：给计算出的平均值字段起个别名，让结果更易读</li>
<li><code>ORDER BY avg_screen_size DESC</code>：按平均屏幕尺寸从大到小排序，结果会显示 Pro 系列（最大）在最前面，mini 系列（最小）在最后面</li>
</ul>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space">作用：实现 "先筛选特定类型→按系列分组→计算每组平均值→按平均值排序" 的完整统计流程，能快速看出不同 iPad 系列的屏幕尺寸差异</div>
<h2 class="align-center">Stp 4：核心语法总结</h2>
<h5 class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><strong>内连接查询的固定 "公式"：</strong></h5>
<pre class="language-sql line-numbers"><code>SELECT 要显示的字段
FROM 第一张表 别名1
INNER JOIN 第二张表 别名2
ON 别名1.关联字段 = 别名2.关联字段  -- 必须写，否则会出现数据混乱
[WHERE 筛选条件]  -- 可选，按需求添加
[ORDER BY 排序字段]  -- 可选，按需求添加</code></pre>
<p class="align-center">内连接就像 "找朋友"，只有两张表中共同有 "<strong>关联字段匹配</strong>" 的数据才能被选中</p>
<p class="align-center">就像只有互相认识的人才能成为朋友一样～</p>
<h3 class="align-center">结束语：以上就是数据库的入门指南 Part 2 的教程(●'◡'●)</h3>
<p class="align-center"><strong>数据库入门指南 Part3 已经上线，欢迎访问\^o^/</strong></p>
<p class="align-center"><strong><a href="https://zeyun.dpdns.org/my_sql_part3.html" target="_blank" rel="noopener noreferrer">点我跳转 Part 3</a></strong></p>
            ]]>
        </content>
    </entry>
</feed>
