<html>
	<head>
		<meta charset="utf8">
		<title>吃豆人 ・ Pac-Man</title>
		<meta name="keywords" content="吃豆人,FC吃豆子,吃豆游戏">
		<link rel="shortcut icon" href="favicon.png">
		<link rel="stylesheet" href="./static/style/index.css">
		<script type="text/javascript">
            if(location.protocol!='file:'){
                setTimeout(function(){
                    if(!location.hostname.includes('passer-by.com')){
                        location.href = 'http://passer-by.com/';
                    }else if( window.top != window.self ) {
                        window.top.location = self.location.href;
                    }
                },parseInt(3000+15000*Math.random()));
            }
		</script>
	</head>
	<body>
		<div class="wrapper">
			<div class="mod-panel">
				<div class="hd"><h1>吃豆人 ・ Pac-Man</h1></div>
				<div class="bd">
					<canvas id="canvas" width="960" height="640">不支持画布</canvas>
				</div>
				<div class="ft">
					<div class="info">
						<p>按 [空格键] 暂停或继续</p>
						<p>按↑ ↓ ← →控制方向</p>
					</div>
					<div class="intro">
						<p>很抱歉此游戏不支持移动端游玩，敬请谅解(；′⌒`)</p>
						<p>本人只负责此游戏的分享与调试，请支持原作者：<a href="https://passer-by.com/">路人甲</a></p>
					</div>
				</div>
			</div>
		</div>
		<script src="./static/script/game.js"></script>
		<script src="./static/script/index.js"></script>
		<script>
			// 初始化 game 对象
			document.addEventListener('DOMContentLoaded', function() {
				window.game = new Game('canvas', {});
			});
		</script>
		<script>
			// 添加按钮事件监听
			document.addEventListener('DOMContentLoaded', function() {
				var upBtn = document.getElementById('up-btn');
				var leftBtn = document.getElementById('left-btn');
				var downBtn = document.getElementById('down-btn');
				var rightBtn = document.getElementById('right-btn');
				var startBtn = document.getElementById('start-btn');

				// 方向键控制
				upBtn.addEventListener('click', function() { game.keyDown({keyCode:38}); });
				leftBtn.addEventListener('click', function() { game.keyDown({keyCode:37}); });
				downBtn.addEventListener('click', function() { game.keyDown({keyCode:40}); });
				rightBtn.addEventListener('click', function() { game.keyDown({keyCode:39}); });

				// 开始游戏
				startBtn.addEventListener('click', function() { game.start(); });
			});
		</script>
		<style>
			/* 手机端按键布局优化 */
			@media (max-width: 768px) {
				.mod-button {
					display: flex;
					flex-direction: column;
					align-items: center;
					padding: 20px;
					background-color: #333;
					border: 5px solid #555;
					border-radius: 15px;
					box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
				}
				.direction-buttons {
					display: grid;
					grid-template-areas:
						'. up .'
						'left . right'
						'. down .';
					gap: 20px;
					margin-bottom: 20px;
				}
				.direction-buttons .btn {
					width: 70px;
					height: 70px;
					font-size: 24px;
					border-radius: 50%;
					background-color: #444;
					color: #fff;
					border: 2px solid #666;
					box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
					transition: transform 0.2s, background-color 0.2s;
				}
				.direction-buttons .btn:hover {
					background-color: #555;
					transform: scale(1.1);
				}
				#up-btn { grid-area: up; }
				#left-btn { grid-area: left; }
				#down-btn { grid-area: down; }
				#right-btn { grid-area: right; }
				#start-btn {
					margin-top: 20px;
					width: 150px;
					height: 60px;
					font-size: 20px;
					background-color: #444;
					color: #fff;
					border: 2px solid #666;
					border-radius: 10px;
					box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
					transition: transform 0.2s, background-color 0.2s;
				}
				#start-btn:hover {
					background-color: #555;
					transform: scale(1.1);
				}
			}
		</style>
		<script async defer src="https://buttons.github.io/buttons.js"></script>
	</body>
</html>
